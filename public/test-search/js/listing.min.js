!function(a,b){var c=function(a){this.lists={};var c=this,d=/es\s|es$|s\s|s$/gi;a&&(b(window).bind("list.remove",function(a,e){for(var f,g=e.list_id,h=e.key.push?e.key:[e.key],i=c.lists[g],j=0,k=h.length;k>j;j++)f=h[j],i&&i[f]&&delete i[f],b('[data-id="'+f+'"]:not([data-ignore-classes])').removeClass(g.replace(d,"ed"))}),b(window).bind("list.add",function(a,e){for(var f,g=e.list_id,h=e.key.push?e.key:[e.key],i=c.lists[g],j=0,k=h.length;k>j;j++)f=h[j],i&&!i[f]&&(i[f]=f),b('[data-id="'+f+'"]:not([data-ignore-classes])').addClass(g.replace(d,"ed"))}))};c.prototype.isMemberOf=function(a,b){return this.lists.hasOwnProperty(a)&&this.lists[a].hasOwnProperty(b)},c.prototype.getMembership=function(a){var b=[];for(var c in this.lists)this.lists[c]&&this.lists[c].hasOwnProperty(a)&&b.push(c);return b},c.prototype.remove=function(a,b){var c=this.lists[a];c&&delete c[b]},c.prototype.add=function(a,b){var c=this.lists[a];if(c){b=b instanceof Array?b:[b];for(var d=0,e=b.length;e>d;d++)c[b[d]]=b[d]}},c.prototype.refresh=function(a){var c=this;b.getJSON("/lists/system",function(b){var d={};for(var e in b)if(b.hasOwnProperty(e)){var f={};for(var g in b[e])f[b[e][g]]=b[e][g];d[e]=f}c.lists=d,a&&a.call(c)})},a.ListManager=c,a.listManager=new c(!0)}(window,jQuery),function(a){var b,c,d="0.3.4",e="hasOwnProperty",f=/[\.\/]/,g="*",h=function(){},i=function(a,b){return a-b},j={n:{}},k=function(a,d){var e,f=c,g=Array.prototype.slice.call(arguments,2),h=k.listeners(a),j=0,l=[],m={},n=[],o=b;b=a,c=0;for(var p=0,q=h.length;q>p;p++)"zIndex"in h[p]&&(l.push(h[p].zIndex),h[p].zIndex<0&&(m[h[p].zIndex]=h[p]));for(l.sort(i);l[j]<0;)if(e=m[l[j++]],n.push(e.apply(d,g)),c)return c=f,n;for(p=0;q>p;p++)if(e=h[p],"zIndex"in e)if(e.zIndex==l[j]){if(n.push(e.apply(d,g)),c)break;do if(j++,e=m[l[j]],e&&n.push(e.apply(d,g)),c)break;while(e)}else m[e.zIndex]=e;else if(n.push(e.apply(d,g)),c)break;return c=f,b=o,n.length?n:null};k.listeners=function(a){var b,c,d,e,h,i,k,l,m=a.split(f),n=j,o=[n],p=[];for(e=0,h=m.length;h>e;e++){for(l=[],i=0,k=o.length;k>i;i++)for(n=o[i].n,c=[n[m[e]],n[g]],d=2;d--;)b=c[d],b&&(l.push(b),p=p.concat(b.f||[]));o=l}return p},k.on=function(a,b){for(var c=a.split(f),d=j,e=0,g=c.length;g>e;e++)d=d.n,!d[c[e]]&&(d[c[e]]={n:{}}),d=d[c[e]];for(d.f=d.f||[],e=0,g=d.f.length;g>e;e++)if(d.f[e]==b)return h;return d.f.push(b),function(a){+a==+a&&(b.zIndex=+a)}},k.stop=function(){c=1},k.nt=function(a){return a?new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)").test(b):b},k.off=k.unbind=function(a,b){var c,d,h,i,k,l,m,n=a.split(f),o=[j];for(i=0,k=n.length;k>i;i++)for(l=0;l<o.length;l+=h.length-2){if(h=[l,1],c=o[l].n,n[i]!=g)c[n[i]]&&h.push(c[n[i]]);else for(d in c)c[e](d)&&h.push(c[d]);o.splice.apply(o,h)}for(i=0,k=o.length;k>i;i++)for(c=o[i];c.n;){if(b){if(c.f){for(l=0,m=c.f.length;m>l;l++)if(c.f[l]==b){c.f.splice(l,1);break}!c.f.length&&delete c.f}for(d in c.n)if(c.n[e](d)&&c.n[d].f){var p=c.n[d].f;for(l=0,m=p.length;m>l;l++)if(p[l]==b){p.splice(l,1);break}!p.length&&delete c.n[d].f}}else{delete c.f;for(d in c.n)c.n[e](d)&&c.n[d].f&&delete c.n[d].f}c=c.n}},k.once=function(a,b){var c=function(){var d=b.apply(this,arguments);return k.unbind(a,c),d};return k.on(a,c)},k.version=d,k.toString=function(){return"You are running Eve "+d},"undefined"!=typeof module&&module.exports?module.exports=k:"undefined"!=typeof define?define("eve",[],function(){return k}):a.eve=k}(this),function(){function a(a,b,d,f,g,h){d=R(d);var i,k,l,n,o,q,r=a.ms,s={},t={},v={};if(f)for(x=0,A=Ya.length;A>x;x++){var w=Ya[x];if(w.el.id==b.id&&w.anim==a){w.percent!=d?(Ya.splice(x,1),l=1):k=w,b.attr(w.totalOrigin);break}}else f=+t;for(var x=0,A=a.percents.length;A>x;x++){if(a.percents[x]==d||a.percents[x]>f*a.top){d=a.percents[x],o=a.percents[x-1]||0,r=r/a.top*(d-o),n=a.percents[x+1],i=a.anim[d];break}f&&b.attr(a.anim[a.percents[x]])}if(i){if(k)k.initstatus=f,k.start=new Date-k.ms*f;else{for(var B in i)if(i[p](B)&&(V[p](B)||b.paper.customAttributes[p](B)))switch(s[B]=b.attr(B),null==s[B]&&(s[B]=U[B]),t[B]=i[B],V[B]){case J:v[B]=(t[B]-s[B])/r;break;case"colour":s[B]=j.getRGB(s[B]);var C=j.getRGB(t[B]);v[B]={r:(C.r-s[B].r)/r,g:(C.g-s[B].g)/r,b:(C.b-s[B].b)/r};break;case"path":var D=za(s[B],t[B]),E=D[1];for(s[B]=D[0],v[B]=[],x=0,A=s[B].length;A>x;x++){v[B][x]=[0];for(var F=1,G=s[B][x].length;G>F;F++)v[B][x][F]=(E[x][F]-s[B][x][F])/r}break;case"transform":var H=b._,I=Da(H[B],t[B]);if(I)for(s[B]=I.from,t[B]=I.to,v[B]=[],v[B].real=!0,x=0,A=s[B].length;A>x;x++)for(v[B][x]=[s[B][x][0]],F=1,G=s[B][x].length;G>F;F++)v[B][x][F]=(t[B][x][F]-s[B][x][F])/r;else{var K=b.matrix||new e,L={_:{transform:H.transform},getBBox:function(){return b.getBBox(1)}};s[B]=[K.a,K.b,K.c,K.d,K.e,K.f],Ba(L,t[B]),t[B]=L._.transform,v[B]=[(L.matrix.a-K.a)/r,(L.matrix.b-K.b)/r,(L.matrix.c-K.c)/r,(L.matrix.d-K.d)/r,(L.matrix.e-K.e)/r,(L.matrix.e-K.f)/r]}break;case"csv":var M=y(i[B])[z](m),N=y(s[B])[z](m);if("clip-rect"==B)for(s[B]=N,v[B]=[],x=N.length;x--;)v[B][x]=(M[x]-s[B][x])/r;t[B]=M;break;default:for(M=[][u](i[B]),N=[][u](s[B]),v[B]=[],x=b.paper.customAttributes[B].length;x--;)v[B][x]=((M[x]||0)-(N[x]||0))/r}var O=i.easing,Q=j.easing_formulas[O];if(!Q)if(Q=y(O).match(P),Q&&5==Q.length){var S=Q;Q=function(a){return c(a,+S[1],+S[2],+S[3],+S[4],r)}}else Q=da;if(q=i.start||a.start||+new Date,w={anim:a,percent:d,timestamp:q,start:q+(a.del||0),status:0,initstatus:f||0,stop:!1,ms:r,easing:Q,from:s,diff:v,to:t,el:b,callback:i.callback,prev:o,next:n,repeat:h||a.times,origin:b.attr(),totalOrigin:g},Ya.push(w),f&&!k&&!l&&(w.stop=!0,w.start=new Date-r*f,1==Ya.length))return $a();l&&(w.start=new Date-w.ms*f),1==Ya.length&&Za($a)}eve("anim.start."+b.id,b,a)}}function b(a,b){var c=[],d={};if(this.ms=b,this.times=1,a){for(var e in a)a[p](e)&&(d[R(e)]=a[e],c.push(R(e)));c.sort(ba)}this.anim=d,this.top=c[c.length-1],this.percents=c}function c(a,b,c,d,e,f){function g(a,b){var c,d,e,f,g,h;for(e=a,h=0;8>h;h++){if(f=i(e)-a,G(f)<b)return e;if(g=(3*l*e+2*k)*e+j,G(g)<1e-6)break;e-=f/g}if(c=0,d=1,e=a,c>e)return c;if(e>d)return d;for(;d>c;){if(f=i(e),G(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}function h(a,b){var c=g(a,b);return((o*c+n)*c+m)*c}function i(a){return((l*a+k)*a+j)*a}var j=3*b,k=3*(d-b)-j,l=1-j-k,m=3*c,n=3*(e-c)-m,o=1-m-n;return h(a,1/(200*f))}function d(){return this.x+x+this.y+x+this.width+" × "+this.height}function e(a,b,c,d,e,f){null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function f(a,b){for(var c=[],d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4==d?f[3]={x:+a[0],y:+a[1]}:e-2==d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4==d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function g(){return this.hex}function h(a,b,c){function d(){var e=Array.prototype.slice.call(arguments,0),f=e.join("␀"),g=d.cache=d.cache||{},h=d.count=d.count||[];return g[p](f)?(i(h,f),c?c(g[f]):g[f]):(h.length>=1e3&&delete g[h.shift()],h.push(f),g[f]=a[t](b,e),c?c(g[f]):g[f])}return d}function i(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return a.push(a.splice(c,1)[0])}function j(a){if(j.is(a,"function"))return k?a():eve.on("DOMload",a);if(j.is(a,L))return j._engine.create[t](j,a.splice(0,3+j.is(a[0],J))).add(a);var b=Array.prototype.slice.call(arguments,0);if(j.is(b[b.length-1],"function")){var c=b.pop();return k?c.call(j._engine.create[t](j,b)):eve.on("DOMload",function(){c.call(j._engine.create[t](j,b))})}return j._engine.create[t](j,arguments)}j.version="2.0.2",j.eve=eve;var k,l,m=/[, ]+/,n={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},o=/\{(\d+)\}/g,p="hasOwnProperty",q={doc:document,win:window},r={was:Object.prototype[p].call(q.win,"Raphael"),is:q.win.Raphael},s=function(){this.ca=this.customAttributes={}},t="apply",u="concat",v="createTouch"in q.doc,w="",x=" ",y=String,z="split",A="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[z](x),B={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},C=y.prototype.toLowerCase,D=Math,E=D.max,F=D.min,G=D.abs,H=D.pow,I=D.PI,J="number",K="string",L="array",M=Object.prototype.toString,N=(j._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),O={NaN:1,Infinity:1,"-Infinity":1},P=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=D.round,R=parseFloat,S=parseInt,T=y.prototype.toUpperCase,U=j._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},V=j._availableAnimAttrs={blur:J,"clip-rect":"csv",cx:J,cy:J,fill:"colour","fill-opacity":J,"font-size":J,height:J,opacity:J,path:"path",r:J,rx:J,ry:J,stroke:"colour","stroke-opacity":J,"stroke-width":J,transform:"transform",width:J,x:J,y:J},W=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,X={hs:1,rg:1},Y=/,?([achlmqrstvxz]),?/gi,Z=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,$=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,_=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,aa=(j._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),ba=function(a,b){return R(a)-R(b)},ca=function(){},da=function(a){return a},ea=j._rectPath=function(a,b,c,d,e){return e?[["M",a+e,b],["l",c-2*e,0],["a",e,e,0,0,1,e,e],["l",0,d-2*e],["a",e,e,0,0,1,-e,e],["l",2*e-c,0],["a",e,e,0,0,1,-e,-e],["l",0,2*e-d],["a",e,e,0,0,1,e,-e],["z"]]:[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},fa=function(a,b,c,d){return null==d&&(d=c),[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},ga=j._getPath={path:function(a){return a.attr("path")},circle:function(a){var b=a.attrs;return fa(b.cx,b.cy,b.r)},ellipse:function(a){var b=a.attrs;return fa(b.cx,b.cy,b.rx,b.ry)},rect:function(a){var b=a.attrs;return ea(b.x,b.y,b.width,b.height,b.r)},image:function(a){var b=a.attrs;return ea(b.x,b.y,b.width,b.height)},text:function(a){var b=a._getBBox();return ea(b.x,b.y,b.width,b.height)}},ha=j.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,h,i;for(a=za(a),e=0,g=a.length;g>e;e++)for(i=a[e],f=1,h=i.length;h>f;f+=2)c=b.x(i[f],i[f+1]),d=b.y(i[f],i[f+1]),i[f]=c,i[f+1]=d;return a};if(j._g=q,j.type=q.win.SVGAngle||q.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==j.type){var ia,ja=q.doc.createElement("div");if(ja.innerHTML='<v:shape adj="1"/>',ia=ja.firstChild,ia.style.behavior="url(#default#VML)",!ia||"object"!=typeof ia.adj)return j.type=w;ja=null}j.svg=!(j.vml="VML"==j.type),j._Paper=s,j.fn=l=s.prototype=j.prototype,j._id=0,j._oid=0,j.is=function(a,b){return b=C.call(b),"finite"==b?!O[p](+a):"array"==b?a instanceof Array:"null"==b&&null===a||b==typeof a&&null!==a||"object"==b&&a===Object(a)||"array"==b&&Array.isArray&&Array.isArray(a)||M.call(a).slice(8,-1).toLowerCase()==b},j.angle=function(a,b,c,d,e,f){if(null==e){var g=a-c,h=b-d;return g||h?(180+180*D.atan2(-h,-g)/I+360)%360:0}return j.angle(a,b,e,f)-j.angle(c,d,e,f)},j.rad=function(a){return a%360*I/180},j.deg=function(a){return 180*a/I%360},j.snapTo=function(a,b,c){if(c=j.is(c,"finite")?c:10,j.is(a,L)){for(var d=a.length;d--;)if(G(a[d]-b)<=c)return a[d]}else{a=+a;var e=b%a;if(c>e)return b-e;if(e>a-c)return b-e+a}return b};j.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,b).toUpperCase()}}(/[xy]/g,function(a){var b=16*D.random()|0,c="x"==a?b:3&b|8;return c.toString(16)});j.setWindow=function(a){eve("setWindow",j,q.win,a),q.win=a,q.doc=q.win.document,j._engine.initWin&&j._engine.initWin(q.win)};var ka=function(a){if(j.vml){var b,c=/^\s+|\s+$/g;try{var d=new ActiveXObject("htmlfile");d.write("<body>"),d.close(),b=d.body}catch(e){b=createPopup().document.body}var f=b.createTextRange();ka=h(function(a){try{b.style.color=y(a).replace(c,w);var d=f.queryCommandValue("ForeColor");return d=(255&d)<<16|65280&d|(16711680&d)>>>16,"#"+("000000"+d.toString(16)).slice(-6)}catch(e){return"none"}})}else{var g=q.doc.createElement("i");g.title="Raphaël Colour Picker",g.style.display="none",q.doc.body.appendChild(g),ka=h(function(a){return g.style.color=a,q.doc.defaultView.getComputedStyle(g,w).getPropertyValue("color")})}return ka(a)},la=function(){return"hsb("+[this.h,this.s,this.b]+")"},ma=function(){return"hsl("+[this.h,this.s,this.l]+")"},na=function(){return this.hex},oa=function(a,b,c){if(null==b&&j.is(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(c=a.b,b=a.g,a=a.r),null==b&&j.is(a,K)){var d=j.getRGB(a);a=d.r,b=d.g,c=d.b}return(a>1||b>1||c>1)&&(a/=255,b/=255,c/=255),[a,b,c]},pa=function(a,b,c,d){a*=255,b*=255,c*=255;var e={r:a,g:b,b:c,hex:j.rgb(a,b,c),toString:na};return j.is(d,"finite")&&(e.opacity=d),e};j.color=function(a){var b;return j.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(b=j.hsb2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):j.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(b=j.hsl2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):(j.is(a,"string")&&(a=j.getRGB(a)),j.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(b=j.rgb2hsl(a),a.h=b.h,a.s=b.s,a.l=b.l,b=j.rgb2hsb(a),a.v=b.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1)),a.toString=na,a},j.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h,d=a.o),a*=360;var e,f,g,h,i;return a=a%360/60,i=c*b,h=i*(1-G(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],pa(e,f,g,d)},j.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h),(a>1||b>1||c>1)&&(a/=360,b/=100,c/=100),a*=360;var e,f,g,h,i;return a=a%360/60,i=2*b*(.5>c?c:1-c),h=i*(1-G(a%2-1)),e=f=g=c-i/2,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a],pa(e,f,g,d)},j.rgb2hsb=function(a,b,c){c=oa(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g;return f=E(a,b,c),g=f-F(a,b,c),d=0==g?null:f==a?(b-c)/g:f==b?(c-a)/g+2:(a-b)/g+4,d=(d+360)%6*60/360,e=0==g?0:g/f,{h:d,s:e,b:f,toString:la}},j.rgb2hsl=function(a,b,c){c=oa(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g,h,i;return g=E(a,b,c),h=F(a,b,c),i=g-h,d=0==i?null:g==a?(b-c)/i:g==b?(c-a)/i+2:(a-b)/i+4,d=(d+360)%6*60/360,f=(g+h)/2,e=0==i?0:.5>f?i/(2*f):i/(2-2*f),{h:d,s:e,l:f,toString:ma}},j._path2string=function(){return this.join(",").replace(Y,"$1")};j._preload=function(a,b){var c=q.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em",c.onload=function(){b.call(this),this.onload=null,q.doc.body.removeChild(this)},c.onerror=function(){q.doc.body.removeChild(this)},q.doc.body.appendChild(c),c.src=a};j.getRGB=h(function(a){if(!a||(a=y(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:g};!X[p](a.toLowerCase().substring(0,2))&&"#"!=a.charAt()&&(a=ka(a));var b,c,d,e,f,h,i=a.match(N);return i?(i[2]&&(d=S(i[2].substring(5),16),c=S(i[2].substring(3,5),16),b=S(i[2].substring(1,3),16)),i[3]&&(d=S((f=i[3].charAt(3))+f,16),c=S((f=i[3].charAt(2))+f,16),b=S((f=i[3].charAt(1))+f,16)),i[4]&&(h=i[4][z](W),b=R(h[0]),"%"==h[0].slice(-1)&&(b*=2.55),c=R(h[1]),"%"==h[1].slice(-1)&&(c*=2.55),d=R(h[2]),"%"==h[2].slice(-1)&&(d*=2.55),"rgba"==i[1].toLowerCase().slice(0,4)&&(e=R(h[3])),h[3]&&"%"==h[3].slice(-1)&&(e/=100)),i[5]?(h=i[5][z](W),b=R(h[0]),"%"==h[0].slice(-1)&&(b*=2.55),c=R(h[1]),"%"==h[1].slice(-1)&&(c*=2.55),d=R(h[2]),"%"==h[2].slice(-1)&&(d*=2.55),("deg"==h[0].slice(-3)||"°"==h[0].slice(-1))&&(b/=360),"hsba"==i[1].toLowerCase().slice(0,4)&&(e=R(h[3])),h[3]&&"%"==h[3].slice(-1)&&(e/=100),j.hsb2rgb(b,c,d,e)):i[6]?(h=i[6][z](W),b=R(h[0]),"%"==h[0].slice(-1)&&(b*=2.55),c=R(h[1]),"%"==h[1].slice(-1)&&(c*=2.55),d=R(h[2]),"%"==h[2].slice(-1)&&(d*=2.55),("deg"==h[0].slice(-3)||"°"==h[0].slice(-1))&&(b/=360),"hsla"==i[1].toLowerCase().slice(0,4)&&(e=R(h[3])),h[3]&&"%"==h[3].slice(-1)&&(e/=100),j.hsl2rgb(b,c,d,e)):(i={r:b,g:c,b:d,toString:g},i.hex="#"+(16777216|d|c<<8|b<<16).toString(16).slice(1),j.is(e,"finite")&&(i.opacity=e),i)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:g}},j),j.hsb=h(function(a,b,c){return j.hsb2rgb(a,b,c).hex}),j.hsl=h(function(a,b,c){return j.hsl2rgb(a,b,c).hex}),j.rgb=h(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)}),j.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);return b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b})),c.hex},j.getColor.reset=function(){delete this.start},j.parsePathString=h(function(a){if(!a)return null;var b={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},c=[];return j.is(a,L)&&j.is(a[0],L)&&(c=ra(a)),c.length||y(a).replace(Z,function(a,d,e){var f=[],g=d.toLowerCase();if(e.replace(_,function(a,b){b&&f.push(+b)}),"m"==g&&f.length>2&&(c.push([d][u](f.splice(0,2))),g="l",d="m"==d?"l":"L"),"r"==g)c.push([d][u](f));else for(;f.length>=b[g]&&(c.push([d][u](f.splice(0,b[g]))),b[g]););}),c.toString=j._path2string,c}),j.parseTransformString=h(function(a){if(!a)return null;var b=[];return j.is(a,L)&&j.is(a[0],L)&&(b=ra(a)),b.length||y(a).replace($,function(a,c,d){var e=[];C.call(c);d.replace(_,function(a,b){b&&e.push(+b)}),b.push([c][u](e))}),b.toString=j._path2string,b}),j.findDotsAtSegment=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=H(j,3),l=H(j,2),m=i*i,n=m*i,o=k*a+3*l*i*c+3*j*i*i*e+n*g,p=k*b+3*l*i*d+3*j*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,w=j*e+i*g,x=j*f+i*h,y=90-180*D.atan2(q-s,r-t)/I;return(q>s||t>r)&&(y+=180),{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:w,y:x},alpha:y}},j._removedFactory=function(a){return function(){throw new Error("Raphaël: you are calling to method “"+a+"” of removed object")}};var qa=h(function(a){if(!a)return{x:0,y:0,width:0,height:0};a=za(a);for(var b,c=0,d=0,e=[],f=[],g=0,h=a.length;h>g;g++)if(b=a[g],"M"==b[0])c=b[1],d=b[2],e.push(c),f.push(d);else{var i=ya(c,d,b[1],b[2],b[3],b[4],b[5],b[6]);e=e[u](i.min.x,i.max.x),f=f[u](i.min.y,i.max.y),c=b[5],d=b[6]}var j=F[t](0,e),k=F[t](0,f);return{x:j,y:k,width:E[t](0,e)-j,height:E[t](0,f)-k}},null,function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}}),ra=function(a){var b=[];j.is(a,L)&&j.is(a&&a[0],L)||(a=j.parsePathString(a));for(var c=0,d=a.length;d>c;c++){b[c]=[];for(var e=0,f=a[c].length;f>e;e++)b[c][e]=a[c][e]}return b.toString=j._path2string,b},sa=j._pathToRelative=h(function(a){j.is(a,L)&&j.is(a&&a[0],L)||(a=j.parsePathString(a));var b=[],c=0,d=0,e=0,f=0,g=0;"M"==a[0][0]&&(c=a[0][1],d=a[0][2],e=c,f=d,g++,b.push(["M",c,d]));for(var h=g,i=a.length;i>h;h++){var k=b[h]=[],l=a[h];if(l[0]!=C.call(l[0]))switch(k[0]=C.call(l[0]),k[0]){case"a":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]-c).toFixed(3),k[7]=+(l[7]-d).toFixed(3);break;case"v":k[1]=+(l[1]-d).toFixed(3);break;case"m":e=l[1],f=l[2];default:for(var m=1,n=l.length;n>m;m++)k[m]=+(l[m]-(m%2?c:d)).toFixed(3)}else{k=b[h]=[],"m"==l[0]&&(e=l[1]+c,f=l[2]+d);for(var o=0,p=l.length;p>o;o++)b[h][o]=l[o]}var q=b[h].length;switch(b[h][0]){case"z":c=e,d=f;break;case"h":c+=+b[h][q-1];break;case"v":d+=+b[h][q-1];break;default:c+=+b[h][q-2],d+=+b[h][q-1]}}return b.toString=j._path2string,b},0,ra),ta=j._pathToAbsolute=h(function(a){if(j.is(a,L)&&j.is(a&&a[0],L)||(a=j.parsePathString(a)),!a||!a.length)return[["M",0,0]];var b=[],c=0,d=0,e=0,g=0,h=0;"M"==a[0][0]&&(c=+a[0][1],d=+a[0][2],e=c,g=d,h++,b[0]=["M",c,d]);for(var i,k,l=3==a.length&&"M"==a[0][0]&&"R"==a[1][0].toUpperCase()&&"Z"==a[2][0].toUpperCase(),m=h,n=a.length;n>m;m++){if(b.push(i=[]),k=a[m],k[0]!=T.call(k[0]))switch(i[0]=T.call(k[0]),i[0]){case"A":i[1]=k[1],i[2]=k[2],i[3]=k[3],i[4]=k[4],i[5]=k[5],i[6]=+(k[6]+c),i[7]=+(k[7]+d);break;case"V":i[1]=+k[1]+d;break;case"H":i[1]=+k[1]+c;break;case"R":for(var o=[c,d][u](k.slice(1)),p=2,q=o.length;q>p;p++)o[p]=+o[p]+c,o[++p]=+o[p]+d;b.pop(),b=b[u](f(o,l));break;case"M":e=+k[1]+c,g=+k[2]+d;default:for(p=1,q=k.length;q>p;p++)i[p]=+k[p]+(p%2?c:d)}else if("R"==k[0])o=[c,d][u](k.slice(1)),b.pop(),b=b[u](f(o,l)),i=["R"][u](k.slice(-2));else for(var r=0,s=k.length;s>r;r++)i[r]=k[r];switch(i[0]){case"Z":c=e,d=g;break;case"H":c=i[1];break;case"V":d=i[1];break;case"M":e=i[i.length-2],g=i[i.length-1];default:c=i[i.length-2],d=i[i.length-1]}}return b.toString=j._path2string,b},null,ra),ua=function(a,b,c,d){return[a,b,c,d,c,d]},va=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},wa=function(a,b,c,d,e,f,g,i,j,k){var l,m=120*I/180,n=I/180*(+e||0),o=[],p=h(function(a,b,c){var d=a*D.cos(c)-b*D.sin(c),e=a*D.sin(c)+b*D.cos(c);return{x:d,y:e}});if(k)A=k[0],B=k[1],x=k[2],y=k[3];else{l=p(a,b,-n),a=l.x,b=l.y,l=p(i,j,-n),i=l.x,j=l.y;var q=(D.cos(I/180*e),D.sin(I/180*e),(a-i)/2),r=(b-j)/2,s=q*q/(c*c)+r*r/(d*d);s>1&&(s=D.sqrt(s),c=s*c,d=s*d);var t=c*c,v=d*d,w=(f==g?-1:1)*D.sqrt(G((t*v-t*r*r-v*q*q)/(t*r*r+v*q*q))),x=w*c*r/d+(a+i)/2,y=w*-d*q/c+(b+j)/2,A=D.asin(((b-y)/d).toFixed(9)),B=D.asin(((j-y)/d).toFixed(9));A=x>a?I-A:A,B=x>i?I-B:B,0>A&&(A=2*I+A),0>B&&(B=2*I+B),g&&A>B&&(A-=2*I),!g&&B>A&&(B-=2*I)}var C=B-A;if(G(C)>m){var E=B,F=i,H=j;B=A+m*(g&&B>A?1:-1),i=x+c*D.cos(B),j=y+d*D.sin(B),o=wa(i,j,c,d,e,0,g,F,H,[B,E,x,y])}C=B-A;var J=D.cos(A),K=D.sin(A),L=D.cos(B),M=D.sin(B),N=D.tan(C/4),O=4/3*c*N,P=4/3*d*N,Q=[a,b],R=[a+O*K,b-P*J],S=[i+O*M,j-P*L],T=[i,j];if(R[0]=2*Q[0]-R[0],R[1]=2*Q[1]-R[1],k)return[R,S,T][u](o);o=[R,S,T][u](o).join()[z](",");for(var U=[],V=0,W=o.length;W>V;V++)U[V]=V%2?p(o[V-1],o[V],n).y:p(o[V],o[V+1],n).x;return U},xa=function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:H(j,3)*a+3*H(j,2)*i*c+3*j*i*i*e+H(i,3)*g,y:H(j,3)*b+3*H(j,2)*i*d+3*j*i*i*f+H(i,3)*h}},ya=h(function(a,b,c,d,e,f,g,h){var i,j=e-2*c+a-(g-2*e+c),k=2*(c-a)-2*(e-c),l=a-c,m=(-k+D.sqrt(k*k-4*j*l))/2/j,n=(-k-D.sqrt(k*k-4*j*l))/2/j,o=[b,h],p=[a,g];return G(m)>"1e12"&&(m=.5),G(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=xa(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=xa(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),j=f-2*d+b-(h-2*f+d),k=2*(d-b)-2*(f-d),l=b-d,m=(-k+D.sqrt(k*k-4*j*l))/2/j,n=(-k-D.sqrt(k*k-4*j*l))/2/j,G(m)>"1e12"&&(m=.5),G(n)>"1e12"&&(n=.5),m>0&&1>m&&(i=xa(a,b,c,d,e,f,g,h,m),p.push(i.x),o.push(i.y)),n>0&&1>n&&(i=xa(a,b,c,d,e,f,g,h,n),p.push(i.x),o.push(i.y)),{min:{x:F[t](0,p),y:F[t](0,o)},max:{x:E[t](0,p),y:E[t](0,o)}}}),za=j._path2curve=h(function(a,b){for(var c=ta(a),d=b&&ta(b),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g=(function(a,b){var c,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];switch(!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null),a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][u](wa[t](0,[b.x,b.y][u](a.slice(1))));break;case"S":c=b.x+(b.x-(b.bx||b.x)),d=b.y+(b.y-(b.by||b.y)),a=["C",c,d][u](a.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x)),b.qy=b.y+(b.y-(b.qy||b.y)),a=["C"][u](va(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][u](va(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][u](ua(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][u](ua(b.x,b.y,a[1],b.y));break;case"V":a=["C"][u](ua(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][u](ua(b.x,b.y,b.X,b.Y))}return a}),h=function(a,b){if(a[b].length>7){a[b].shift();for(var e=a[b];e.length;)a.splice(b++,0,["C"][u](e.splice(0,6)));a.splice(b,1),k=E(c.length,d&&d.length||0)}},i=function(a,b,e,f,g){a&&b&&"M"==a[g][0]&&"M"!=b[g][0]&&(b.splice(g,0,["M",f.x,f.y]),e.bx=0,e.by=0,e.x=a[g][1],e.y=a[g][2],k=E(c.length,d&&d.length||0))},j=0,k=E(c.length,d&&d.length||0);k>j;j++){c[j]=g(c[j],e),h(c,j),d&&(d[j]=g(d[j],f)),d&&h(d,j),i(c,d,e,f,j),i(d,c,f,e,j);var l=c[j],m=d&&d[j],n=l.length,o=d&&m.length;e.x=l[n-2],e.y=l[n-1],e.bx=R(l[n-4])||e.x,e.by=R(l[n-3])||e.y,f.bx=d&&(R(m[o-4])||f.x),f.by=d&&(R(m[o-3])||f.y),f.x=d&&m[o-2],f.y=d&&m[o-1]}return d?[c,d]:c},null,ra),Aa=(j._parseDots=h(function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e={},f=a[c].match(/^([^:]*):?([\d\.]*)/);if(e.color=j.getRGB(f[1]),e.color.error)return null;e.color=e.color.hex,f[2]&&(e.offset=f[2]+"%"),b.push(e)}for(c=1,d=b.length-1;d>c;c++)if(!b[c].offset){for(var g=R(b[c-1].offset||0),h=0,i=c+1;d>i;i++)if(b[i].offset){h=b[i].offset;break}h||(h=100,i=d),h=R(h);for(var k=(h-g)/(i-c+1);i>c;c++)g+=k,b[c].offset=g+"%"}return b}),j._tear=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)}),Ba=(j._tofront=function(a,b){b.top!==a&&(Aa(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},j._toback=function(a,b){b.bottom!==a&&(Aa(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},j._insertafter=function(a,b,c){Aa(a,c),b==c.top&&(c.top=a),b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a},j._insertbefore=function(a,b,c){Aa(a,c),b==c.bottom&&(c.bottom=a),b.prev&&(b.prev.next=a),a.prev=b.prev,b.prev=a,a.next=b},j._extractTransform=function(a,b){if(null==b)return a._.transform;b=y(b).replace(/\.{3}|\u2026/g,a._.transform||w);var c=j.parseTransformString(b),d=0,f=0,g=0,h=1,i=1,k=a._,l=new e;if(k.transform=c||[],c)for(var m=0,n=c.length;n>m;m++){var o,p,q,r,s,t=c[m],u=t.length,v=y(t[0]).toLowerCase(),x=t[0]!=v,z=x?l.invert():0;"t"==v&&3==u?x?(o=z.x(0,0),p=z.y(0,0),q=z.x(t[1],t[2]),r=z.y(t[1],t[2]),l.translate(q-o,r-p)):l.translate(t[1],t[2]):"r"==v?2==u?(s=s||a.getBBox(1),l.rotate(t[1],s.x+s.width/2,s.y+s.height/2),d+=t[1]):4==u&&(x?(q=z.x(t[2],t[3]),r=z.y(t[2],t[3]),l.rotate(t[1],q,r)):l.rotate(t[1],t[2],t[3]),d+=t[1]):"s"==v?2==u||3==u?(s=s||a.getBBox(1),l.scale(t[1],t[u-1],s.x+s.width/2,s.y+s.height/2),h*=t[1],i*=t[u-1]):5==u&&(x?(q=z.x(t[3],t[4]),r=z.y(t[3],t[4]),l.scale(t[1],t[2],q,r)):l.scale(t[1],t[2],t[3],t[4]),h*=t[1],i*=t[2]):"m"==v&&7==u&&l.add(t[1],t[2],t[3],t[4],t[5],t[6]),k.dirtyT=1,a.matrix=l}a.matrix=l,k.sx=h,k.sy=i,k.deg=d,k.dx=f=l.e,k.dy=g=l.f,1==h&&1==i&&!d&&k.bbox?(k.bbox.x+=+f,k.bbox.y+=+g):k.dirtyT=1}),Ca=function(a){var b=a[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":return 4==a.length?[b,0,a[2],a[3]]:[b,0];case"s":return 5==a.length?[b,1,1,a[3],a[4]]:3==a.length?[b,1,1]:[b,1]}},Da=j._equaliseTransform=function(a,b){b=y(b).replace(/\.{3}|\u2026/g,a),a=j.parseTransformString(a)||[],b=j.parseTransformString(b)||[];for(var c,d,e,f,g=E(a.length,b.length),h=[],i=[],k=0;g>k;k++){if(e=a[k]||Ca(b[k]),f=b[k]||Ca(e),e[0]!=f[0]||"r"==e[0].toLowerCase()&&(e[2]!=f[2]||e[3]!=f[3])||"s"==e[0].toLowerCase()&&(e[3]!=f[3]||e[4]!=f[4]))return;for(h[k]=[],i[k]=[],c=0,d=E(e.length,f.length);d>c;c++)c in e&&(h[k][c]=e[c]),c in f&&(i[k][c]=f[c])}return{from:h,to:i}};j._getContainer=function(a,b,c,d){var e;return e=null!=d||j.is(a,"object")?a:q.doc.getElementById(a),null!=e?e.tagName?null==b?{container:e,width:e.style.pixelWidth||e.offsetWidth,height:e.style.pixelHeight||e.offsetHeight}:{container:e,width:b,height:c}:{container:1,x:a,y:b,width:c,height:d}:void 0},j.pathToRelative=sa,j._engine={},j.path2curve=za,j.matrix=function(a,b,c,d,f,g){return new e(a,b,c,d,f,g)},function(a){function b(a){var b=D.sqrt(c(a));a[0]&&(a[0]/=b),a[1]&&(a[1]/=b)}function c(a){return a[0]*a[0]+a[1]*a[1]}a.add=function(a,b,c,d,f,g){var h,i,j,k,l=[[],[],[]],m=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],n=[[a,c,f],[b,d,g],[0,0,1]];for(a&&a instanceof e&&(n=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]),h=0;3>h;h++)for(i=0;3>i;i++){for(k=0,j=0;3>j;j++)k+=m[h][j]*n[j][i];l[h][i]=k}this.a=l[0][0],this.b=l[1][0],this.c=l[0][1],this.d=l[1][1],this.e=l[0][2],this.f=l[1][2]},a.invert=function(){var a=this,b=a.a*a.d-a.b*a.c;return new e(a.d/b,-a.b/b,-a.c/b,a.a/b,(a.c*a.f-a.d*a.e)/b,(a.b*a.e-a.a*a.f)/b)},a.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},a.translate=function(a,b){this.add(1,0,0,1,a,b)},a.scale=function(a,b,c,d){null==b&&(b=a),(c||d)&&this.add(1,0,0,1,c,d),this.add(a,0,0,b,0,0),(c||d)&&this.add(1,0,0,1,-c,-d)},a.rotate=function(a,b,c){a=j.rad(a),b=b||0,c=c||0;var d=+D.cos(a).toFixed(9),e=+D.sin(a).toFixed(9);this.add(d,e,-e,d,b,c),this.add(1,0,0,1,-b,-c)},a.x=function(a,b){return a*this.a+b*this.c+this.e},a.y=function(a,b){return a*this.b+b*this.d+this.f},a.get=function(a){return+this[y.fromCharCode(97+a)].toFixed(4)},a.toString=function(){return j.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},a.split=function(){var a={};a.dx=this.e,a.dy=this.f;var d=[[this.a,this.c],[this.b,this.d]];a.scalex=D.sqrt(c(d[0])),b(d[0]),a.shear=d[0][0]*d[1][0]+d[0][1]*d[1][1],d[1]=[d[1][0]-d[0][0]*a.shear,d[1][1]-d[0][1]*a.shear],a.scaley=D.sqrt(c(d[1])),b(d[1]),a.shear/=a.scaley;var e=-d[0][1],f=d[1][1];return 0>f?(a.rotate=j.deg(D.acos(f)),0>e&&(a.rotate=360-a.rotate)):a.rotate=j.deg(D.asin(e)),a.isSimple=!(+a.shear.toFixed(9)||a.scalex.toFixed(9)!=a.scaley.toFixed(9)&&a.rotate),a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate,a.noRotation=!+a.shear.toFixed(9)&&!a.rotate,a},a.toTransformString=function(a){var b=a||this[z]();return b.isSimple?(b.scalex=+b.scalex.toFixed(4),b.scaley=+b.scaley.toFixed(4),b.rotate=+b.rotate.toFixed(4),(b.dx||b.dy?"t"+[b.dx,b.dy]:w)+(1!=b.scalex||1!=b.scaley?"s"+[b.scalex,b.scaley,0,0]:w)+(b.rotate?"r"+[b.rotate,0,0]:w)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(e.prototype);var Ea=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);
"Apple Computer, Inc."==navigator.vendor&&(Ea&&Ea[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&Ea&&Ea[1]<8?l.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:l.safari=ca;for(var Fa=function(){this.returnValue=!1},Ga=function(){return this.originalEvent.preventDefault()},Ha=function(){this.cancelBubble=!0},Ia=function(){return this.originalEvent.stopPropagation()},Ja=function(){return q.doc.addEventListener?function(a,b,c,d){var e=v&&B[b]?B[b]:b,f=function(e){var f=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,g=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft,h=e.clientX+g,i=e.clientY+f;if(v&&B[p](b))for(var j=0,k=e.targetTouches&&e.targetTouches.length;k>j;j++)if(e.targetTouches[j].target==a){var l=e;e=e.targetTouches[j],e.originalEvent=l,e.preventDefault=Ga,e.stopPropagation=Ia;break}return c.call(d,e,h,i)};return a.addEventListener(e,f,!1),function(){return a.removeEventListener(e,f,!1),!0}}:q.doc.attachEvent?function(a,b,c,d){var e=function(a){a=a||q.win.event;var b=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,e=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft,f=a.clientX+e,g=a.clientY+b;return a.preventDefault=a.preventDefault||Fa,a.stopPropagation=a.stopPropagation||Ha,c.call(d,a,f,g)};a.attachEvent("on"+b,e);var f=function(){return a.detachEvent("on"+b,e),!0};return f}:void 0}(),Ka=[],La=function(a){for(var b,c=a.clientX,d=a.clientY,e=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,f=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft,g=Ka.length;g--;){if(b=Ka[g],v){for(var h,i=a.touches.length;i--;)if(h=a.touches[i],h.identifier==b.el._drag.id){c=h.clientX,d=h.clientY,(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();var j,k=b.el.node,l=k.nextSibling,m=k.parentNode,n=k.style.display;q.win.opera&&m.removeChild(k),k.style.display="none",j=b.el.paper.getElementByPoint(c,d),k.style.display=n,q.win.opera&&(l?m.insertBefore(k,l):m.appendChild(k)),j&&eve("drag.over."+b.el.id,b.el,j),c+=f,d+=e,eve("drag.move."+b.el.id,b.move_scope||b.el,c-b.el._drag.x,d-b.el._drag.y,c,d,a)}},Ma=function(a){j.unmousemove(La).unmouseup(Ma);for(var b,c=Ka.length;c--;)b=Ka[c],b.el._drag={},eve("drag.end."+b.el.id,b.end_scope||b.start_scope||b.move_scope||b.el,a);Ka=[]},Na=j.el={},Oa=A.length;Oa--;)(function(a){j[a]=Na[a]=function(b,c){return j.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:Ja(this.shape||this.node||q.doc,a,b,c||this)})),this},j["un"+a]=Na["un"+a]=function(b){for(var c=this.events||[],d=c.length;d--;)if(c[d].name==a&&c[d].f==b)return c[d].unbind(),c.splice(d,1),!c.length&&delete this.events,this;return this}})(A[Oa]);Na.data=function(a,b){var c=aa[this.id]=aa[this.id]||{};if(1==arguments.length){if(j.is(a,"object")){for(var d in a)a[p](d)&&this.data(d,a[d]);return this}return eve("data.get."+this.id,this,c[a],a),c[a]}return c[a]=b,eve("data.set."+this.id,this,b,a),this},Na.removeData=function(a){return null==a?aa[this.id]={}:aa[this.id]&&delete aa[this.id][a],this},Na.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)},Na.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var Pa=[];Na.drag=function(a,b,c,d,e,f){function g(g){(g.originalEvent||g).preventDefault();var h=q.doc.documentElement.scrollTop||q.doc.body.scrollTop,i=q.doc.documentElement.scrollLeft||q.doc.body.scrollLeft;this._drag.x=g.clientX+i,this._drag.y=g.clientY+h,this._drag.id=g.identifier,!Ka.length&&j.mousemove(La).mouseup(Ma),Ka.push({el:this,move_scope:d,start_scope:e,end_scope:f}),b&&eve.on("drag.start."+this.id,b),a&&eve.on("drag.move."+this.id,a),c&&eve.on("drag.end."+this.id,c),eve("drag.start."+this.id,e||d||this,g.clientX+i,g.clientY+h,g)}return this._drag={},Pa.push({el:this,start:g}),this.mousedown(g),this},Na.onDragOver=function(a){a?eve.on("drag.over."+this.id,a):eve.unbind("drag.over."+this.id)},Na.undrag=function(){for(var a=Pa.length;a--;)Pa[a].el==this&&(this.unmousedown(Pa[a].start),Pa.splice(a,1),eve.unbind("drag.*."+this.id));!Pa.length&&j.unmousemove(La).unmouseup(Ma)},l.circle=function(a,b,c){var d=j._engine.circle(this,a||0,b||0,c||0);return this.__set__&&this.__set__.push(d),d},l.rect=function(a,b,c,d,e){var f=j._engine.rect(this,a||0,b||0,c||0,d||0,e||0);return this.__set__&&this.__set__.push(f),f},l.ellipse=function(a,b,c,d){var e=j._engine.ellipse(this,a||0,b||0,c||0,d||0);return this.__set__&&this.__set__.push(e),e},l.path=function(a){a&&!j.is(a,K)&&!j.is(a[0],L)&&(a+=w);var b=j._engine.path(j.format[t](j,arguments),this);return this.__set__&&this.__set__.push(b),b},l.image=function(a,b,c,d,e){var f=j._engine.image(this,a||"about:blank",b||0,c||0,d||0,e||0);return this.__set__&&this.__set__.push(f),f},l.text=function(a,b,c){var d=j._engine.text(this,a||0,b||0,y(c));return this.__set__&&this.__set__.push(d),d},l.set=function(a){!j.is(a,"array")&&(a=Array.prototype.splice.call(arguments,0,arguments.length));var b=new ab(a);return this.__set__&&this.__set__.push(b),b},l.setStart=function(a){this.__set__=a||this.set()},l.setFinish=function(a){var b=this.__set__;return delete this.__set__,b},l.setSize=function(a,b){return j._engine.setSize.call(this,a,b)},l.setViewBox=function(a,b,c,d,e){return j._engine.setViewBox.call(this,a,b,c,d,e)},l.top=l.bottom=null,l.raphael=j;var Qa=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,h=b.top+(q.win.pageYOffset||e.scrollTop||d.scrollTop)-f,i=b.left+(q.win.pageXOffset||e.scrollLeft||d.scrollLeft)-g;return{y:h,x:i}};l.getElementByPoint=function(a,b){var c=this,d=c.canvas,e=q.doc.elementFromPoint(a,b);if(q.win.opera&&"svg"==e.tagName){var f=Qa(d),g=d.createSVGRect();g.x=a-f.x,g.y=b-f.y,g.width=g.height=1;var h=d.getIntersectionList(g,null);h.length&&(e=h[h.length-1])}if(!e)return null;for(;e.parentNode&&e!=d.parentNode&&!e.raphael;)e=e.parentNode;return e==c.canvas.parentNode&&(e=d),e=e&&e.raphael?c.getById(e.raphaelid):null},l.getById=function(a){for(var b=this.bottom;b;){if(b.id==a)return b;b=b.next}return null},l.forEach=function(a,b){for(var c=this.bottom;c;){if(a.call(b,c)===!1)return this;c=c.next}return this},Na.getBBox=function(a){if(this.removed)return{};var b=this._;return a?((b.dirty||!b.bboxwt)&&(this.realPath=ga[this.type](this),b.bboxwt=qa(this.realPath),b.bboxwt.toString=d,b.dirty=0),b.bboxwt):((b.dirty||b.dirtyT||!b.bbox)&&((b.dirty||!this.realPath)&&(b.bboxwt=0,this.realPath=ga[this.type](this)),b.bbox=qa(ha(this.realPath,this.matrix)),b.bbox.toString=d,b.dirty=b.dirtyT=0),b.bbox)},Na.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(a),a},Na.glow=function(a){if("text"==this.type)return null;a=a||{};var b={width:(a.width||10)+(+this.attr("stroke-width")||1),fill:a.fill||!1,opacity:a.opacity||.5,offsetx:a.offsetx||0,offsety:a.offsety||0,color:a.color||"#000"},c=b.width/2,d=this.paper,e=d.set(),f=this.realPath||ga[this.type](this);f=this.matrix?ha(f,this.matrix):f;for(var g=1;c+1>g;g++)e.push(d.path(f).attr({stroke:b.color,fill:b.fill?b.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b.width/c*g).toFixed(3),opacity:+(b.opacity/c).toFixed(3)}));return e.insertBefore(this).translate(b.offsetx,b.offsety)};var Ra={},Sa=function(a,b,c,d,e,f,g,h,i){var k,l,m=0,n=100,o=[a,b,c,d,e,f,g,h].join(),p=Ra[o];if(!p&&(Ra[o]=p={data:[]}),p.timer&&clearTimeout(p.timer),p.timer=setTimeout(function(){delete Ra[o]},2e3),null!=i&&!p.precision){var q=Sa(a,b,c,d,e,f,g,h);p.precision=10*~~q,p.data=[]}n=p.precision||n;for(var r=0;n+1>r;r++){if(p.data[r*n]?l=p.data[r*n]:(l=j.findDotsAtSegment(a,b,c,d,e,f,g,h,r/n),p.data[r*n]=l),r&&(m+=H(H(k.x-l.x,2)+H(k.y-l.y,2),.5)),null!=i&&m>=i)return l;k=l}return null==i?m:void 0},Ta=function(a,b){return function(c,d,e){c=za(c);for(var f,g,h,i,k,l="",m={},n=0,o=0,p=c.length;p>o;o++){if(h=c[o],"M"==h[0])f=+h[1],g=+h[2];else{if(i=Sa(f,g,h[1],h[2],h[3],h[4],h[5],h[6]),n+i>d){if(b&&!m.start){if(k=Sa(f,g,h[1],h[2],h[3],h[4],h[5],h[6],d-n),l+=["C"+k.start.x,k.start.y,k.m.x,k.m.y,k.x,k.y],e)return l;m.start=l,l=["M"+k.x,k.y+"C"+k.n.x,k.n.y,k.end.x,k.end.y,h[5],h[6]].join(),n+=i,f=+h[5],g=+h[6];continue}if(!a&&!b)return k=Sa(f,g,h[1],h[2],h[3],h[4],h[5],h[6],d-n),{x:k.x,y:k.y,alpha:k.alpha}}n+=i,f=+h[5],g=+h[6]}l+=h.shift()+h}return m.end=l,k=a?n:b?m:j.findDotsAtSegment(f,g,h[0],h[1],h[2],h[3],h[4],h[5],1),k.alpha&&(k={x:k.x,y:k.y,alpha:k.alpha}),k}},Ua=Ta(1),Va=Ta(),Wa=Ta(0,1);j.getTotalLength=Ua,j.getPointAtLength=Va,j.getSubpath=function(a,b,c){if(this.getTotalLength(a)-c<1e-6)return Wa(a,b).end;var d=Wa(a,c,1);return b?Wa(d,b).end:d},Na.getTotalLength=function(){return"path"==this.type?this.node.getTotalLength?this.node.getTotalLength():Ua(this.attrs.path):void 0},Na.getPointAtLength=function(a){return"path"==this.type?Va(this.attrs.path,a):void 0},Na.getSubpath=function(a,b){return"path"==this.type?j.getSubpath(this.attrs.path,a,b):void 0};var Xa=j.easing_formulas={linear:function(a){return a},"<":function(a){return H(a,1.7)},">":function(a){return H(a,.48)},"<>":function(a){var b=.48-a/1.04,c=D.sqrt(.1734+b*b),d=c-b,e=H(G(d),1/3)*(0>d?-1:1),f=-c-b,g=H(G(f),1/3)*(0>f?-1:1),h=e+g+.5;return 3*(1-h)*h*h+h*h*h},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a-=1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){return a==!!a?a:H(2,-10*a)*D.sin(2*(a-.075)*I/.3)+1},bounce:function(a){var b,c=7.5625,d=2.75;return 1/d>a?b=c*a*a:2/d>a?(a-=1.5/d,b=c*a*a+.75):2.5/d>a?(a-=2.25/d,b=c*a*a+.9375):(a-=2.625/d,b=c*a*a+.984375),b}};Xa.easeIn=Xa["ease-in"]=Xa["<"],Xa.easeOut=Xa["ease-out"]=Xa[">"],Xa.easeInOut=Xa["ease-in-out"]=Xa["<>"],Xa["back-in"]=Xa.backIn,Xa["back-out"]=Xa.backOut;var Ya=[],Za=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,16)},$a=function(){for(var b=+new Date,c=0;c<Ya.length;c++){var d=Ya[c];if(!d.el.removed&&!d.paused){var e,f,g=b-d.start,h=d.ms,i=d.easing,k=d.from,l=d.diff,m=d.to,n=(d.t,d.el),o={},q={};if(d.initstatus?(g=(d.initstatus*d.anim.top-d.prev)/(d.percent-d.prev)*h,d.status=d.initstatus,delete d.initstatus,d.stop&&Ya.splice(c--,1)):d.status=(d.prev+(d.percent-d.prev)*(g/h))/d.anim.top,!(0>g))if(h>g){var r=i(g/h);for(var s in k)if(k[p](s)){switch(V[s]){case J:e=+k[s]+r*h*l[s];break;case"colour":e="rgb("+[_a(Q(k[s].r+r*h*l[s].r)),_a(Q(k[s].g+r*h*l[s].g)),_a(Q(k[s].b+r*h*l[s].b))].join(",")+")";break;case"path":e=[];for(var t=0,v=k[s].length;v>t;t++){e[t]=[k[s][t][0]];for(var w=1,y=k[s][t].length;y>w;w++)e[t][w]=+k[s][t][w]+r*h*l[s][t][w];e[t]=e[t].join(x)}e=e.join(x);break;case"transform":if(l[s].real)for(e=[],t=0,v=k[s].length;v>t;t++)for(e[t]=[k[s][t][0]],w=1,y=k[s][t].length;y>w;w++)e[t][w]=k[s][t][w]+r*h*l[s][t][w];else{var z=function(a){return+k[s][a]+r*h*l[s][a]};e=[["m",z(0),z(1),z(2),z(3),z(4),z(5)]]}break;case"csv":if("clip-rect"==s)for(e=[],t=4;t--;)e[t]=+k[s][t]+r*h*l[s][t];break;default:var A=[][u](k[s]);for(e=[],t=n.paper.customAttributes[s].length;t--;)e[t]=+A[t]+r*h*l[s][t]}o[s]=e}n.attr(o),function(a,b,c){setTimeout(function(){eve("anim.frame."+a,b,c)})}(n.id,n,d.anim)}else{if(function(a,b,c){setTimeout(function(){eve("anim.frame."+b.id,b,c),eve("anim.finish."+b.id,b,c),j.is(a,"function")&&a.call(b)})}(d.callback,n,d.anim),n.attr(m),Ya.splice(c--,1),d.repeat>1&&!d.next){for(f in m)m[p](f)&&(q[f]=d.totalOrigin[f]);d.el.attr(q),a(d.anim,d.el,d.anim.percents[0],null,d.totalOrigin,d.repeat-1)}d.next&&!d.stop&&a(d.anim,d.el,d.next,null,d.totalOrigin,d.repeat)}}}j.svg&&n&&n.paper&&n.paper.safari(),Ya.length&&Za($a)},_a=function(a){return a>255?255:0>a?0:a};Na.animateWith=function(c,d,e,f,g,h){var i=this;if(i.removed)return h&&h.call(i),i;var k=e instanceof b?e:j.animation(e,f,g,h);a(k,i,k.percents[0],null,i.attr());for(var l=0,m=Ya.length;m>l;l++)if(Ya[l].anim==d&&Ya[l].el==c){Ya[m-1].start=Ya[l].start;break}return i},Na.onAnimation=function(a){return a?eve.on("anim.frame."+this.id,a):eve.unbind("anim.frame."+this.id),this},b.prototype.delay=function(a){var c=new b(this.anim,this.ms);return c.times=this.times,c.del=+a||0,c},b.prototype.repeat=function(a){var c=new b(this.anim,this.ms);return c.del=this.del,c.times=D.floor(E(a,0))||1,c},j.animation=function(a,c,d,e){if(a instanceof b)return a;(j.is(d,"function")||!d)&&(e=e||d||null,d=null),a=Object(a),c=+c||0;var f,g,h={};for(g in a)a[p](g)&&R(g)!=g&&R(g)+"%"!=g&&(f=!0,h[g]=a[g]);return f?(d&&(h.easing=d),e&&(h.callback=e),new b({100:h},c)):new b(a,c)},Na.animate=function(c,d,e,f){var g=this;if(g.removed)return f&&f.call(g),g;var h=c instanceof b?c:j.animation(c,d,e,f);return a(h,g,h.percents[0],null,g.attr()),g},Na.setTime=function(a,b){return a&&null!=b&&this.status(a,F(b,a.ms)/a.ms),this},Na.status=function(b,c){var d,e,f=[],g=0;if(null!=c)return a(b,this,-1,F(c,1)),this;for(d=Ya.length;d>g;g++)if(e=Ya[g],e.el.id==this.id&&(!b||e.anim==b)){if(b)return e.status;f.push({anim:e.anim,status:e.status})}return b?0:f},Na.pause=function(a){for(var b=0;b<Ya.length;b++)Ya[b].el.id==this.id&&(!a||Ya[b].anim==a)&&eve("anim.pause."+this.id,this,Ya[b].anim)!==!1&&(Ya[b].paused=!0);return this},Na.resume=function(a){for(var b=0;b<Ya.length;b++)if(Ya[b].el.id==this.id&&(!a||Ya[b].anim==a)){var c=Ya[b];eve("anim.resume."+this.id,this,c.anim)!==!1&&(delete c.paused,this.status(c.anim,c.status))}return this},Na.stop=function(a){for(var b=0;b<Ya.length;b++)Ya[b].el.id==this.id&&(!a||Ya[b].anim==a)&&eve("anim.stop."+this.id,this,Ya[b].anim)!==!1&&Ya.splice(b--,1);return this},Na.toString=function(){return"Raphaël’s object"};var ab=function(a){if(this.items=[],this.length=0,this.type="set",a)for(var b=0,c=a.length;c>b;b++)a[b]&&(a[b].constructor==Na.constructor||a[b].constructor==ab)&&(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},bb=ab.prototype;bb.push=function(){for(var a,b,c=0,d=arguments.length;d>c;c++)a=arguments[c],a&&(a.constructor==Na.constructor||a.constructor==ab)&&(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this},bb.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},bb.forEach=function(a,b){for(var c=0,d=this.items.length;d>c;c++)if(a.call(b,this.items[c],c)===!1)return this;return this};for(var cb in Na)Na[p](cb)&&(bb[cb]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][t](c,b)})}}(cb));bb.attr=function(a,b){if(a&&j.is(a,L)&&j.is(a[0],"object"))for(var c=0,d=a.length;d>c;c++)this.items[c].attr(a[c]);else for(var e=0,f=this.items.length;f>e;e++)this.items[e].attr(a,b);return this},bb.clear=function(){for(;this.length;)this.pop()},bb.splice=function(a,b,c){a=0>a?E(this.length+a,0):a,b=E(0,F(this.length-a,b));var d,e=[],f=[],g=[];for(d=2;d<arguments.length;d++)g.push(arguments[d]);for(d=0;b>d;d++)f.push(this[a+d]);for(;d<this.length-a;d++)e.push(this[a+d]);var h=g.length;for(d=0;d<h+e.length;d++)this.items[a+d]=this[a+d]=h>d?g[d]:e[d-h];for(d=this.items.length=this.length-=b-h;this[d];)delete this[d++];return new ab(f)},bb.exclude=function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]==a)return this.splice(b,1),!0},bb.animate=function(a,b,c,d){(j.is(c,"function")||!c)&&(d=c||null);var e,f,g=this.items.length,h=g,i=this;if(!g)return this;d&&(f=function(){!--g&&d.call(i)}),c=j.is(c,K)?c:f;var k=j.animation(a,b,c,f);for(e=this.items[--h].animate(k);h--;)this.items[h]&&!this.items[h].removed&&this.items[h].animateWith(e,k,k);return this},bb.insertAfter=function(a){for(var b=this.items.length;b--;)this.items[b].insertAfter(a);return this},bb.getBBox=function(){for(var a=[],b=[],c=[],d=[],e=this.items.length;e--;)if(!this.items[e].removed){var f=this.items[e].getBBox();a.push(f.x),b.push(f.y),c.push(f.x+f.width),d.push(f.y+f.height)}return a=F[t](0,a),b=F[t](0,b),{x:a,y:b,width:E[t](0,c)-a,height:E[t](0,d)-b}},bb.clone=function(a){a=new ab;for(var b=0,c=this.items.length;c>b;b++)a.push(this.items[b].clone());return a},bb.toString=function(){return"Raphaël‘s set"},j.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[p](d)&&(b.face[d]=a.face[d]);if(this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b],!a.svg){b.face["units-per-em"]=S(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[p](e)){var f=a.glyphs[e];if(b.glyphs[e]={w:f.w,k:{},d:f.d&&"M"+f.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},f.k)for(var g in f.k)f[p](g)&&(b.glyphs[e].k[g]=f.k[g])}}return a},l.getFont=function(a,b,c,d){if(d=d||"normal",c=c||"normal",b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400,j.fonts){var e=j.fonts[a];if(!e){var f=new RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,w)+"(\\s|$)","i");for(var g in j.fonts)if(j.fonts[p](g)&&f.test(g)){e=j.fonts[g];break}}var h;if(e)for(var i=0,k=e.length;k>i&&(h=e[i],h.face["font-weight"]!=b||h.face["font-style"]!=c&&h.face["font-style"]||h.face["font-stretch"]!=d);i++);return h}},l.print=function(a,b,c,d,e,f,g){f=f||"middle",g=E(F(g||0,1),-1);var h,i=this.set(),k=y(c)[z](w),l=0;if(j.is(d,c)&&(d=this.getFont(d)),d){h=(e||16)/d.face["units-per-em"];for(var n=d.face.bbox[z](m),o=+n[0],p=+n[1]+("baseline"==f?n[3]-n[1]+ +d.face.descent:(n[3]-n[1])/2),q=0,r=k.length;r>q;q++){var s=q&&d.glyphs[k[q-1]]||{},t=d.glyphs[k[q]];l+=q?(s.w||d.w)+(s.k&&s.k[k[q]]||0)+d.w*g:0,t&&t.d&&i.push(this.path(t.d).attr({fill:"#000",stroke:"none",transform:[["t",l*h,0]]}))}i.transform(["...s",h,h,o,p,"t",(a-o)/h,(b-p)/h])}return i},l.add=function(a){if(j.is(a,"array"))for(var b,c=this.set(),d=0,e=a.length;e>d;d++)b=a[d]||{},n[p](b.type)&&c.push(this[b.type]().attr(b));return c},j.format=function(a,b){var c=j.is(b,L)?[0][u](b):arguments;return a&&j.is(a,K)&&c.length-1&&(a=a.replace(o,function(a,b){return null==c[++b]?w:c[b]})),a||w},j.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,d){var e=d;return c.replace(b,function(a,b,c,d,f){b=b||d,e&&(b in e&&(e=e[b]),"function"==typeof e&&f&&(e=e()))}),e=(null==e||e==d?a:e)+""};return function(b,d){return String(b).replace(a,function(a,b){return c(a,b,d)})}}(),j.ninja=function(){return r.was?q.win.Raphael=r.is:delete Raphael,j},j.st=bb,function(a,b,c){function d(){/in/.test(a.readyState)?setTimeout(d,9):j.eve("DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(b,c=function(){a.removeEventListener(b,c,!1),a.readyState="complete"},!1),a.readyState="loading"),d()}(document,"DOMContentLoaded"),r.was?q.win.Raphael=j:Raphael=j,eve.on("DOMload",function(){k=!0})}(),window.Raphael.svg&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=parseInt,f=Math,g=f.max,h=f.abs,i=f.pow,j=/[, ]+/,k=a.eve,l="",m=" ",n="http://www.w3.org/1999/xlink",o={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};a.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var q=function(d,e){if(e){"string"==typeof d&&(d=q(d));for(var f in e)e[b](f)&&("xlink:"==f.substring(0,6)?d.setAttributeNS(n,f.substring(6),c(e[f])):d.setAttribute(f,c(e[f])))}else d=a._g.doc.createElementNS("http://www.w3.org/2000/svg",d),d.style&&(d.style.webkitTapHighlightColor="rgba(0,0,0,0)");return d},r=function(b,e){var j="linear",k=b.id+e,m=.5,n=.5,o=b.node,p=b.paper,r=o.style,s=a._g.doc.getElementById(k);if(!s){if(e=c(e).replace(a._radial_gradient,function(a,b,c){if(j="radial",b&&c){m=d(b),n=d(c);var e=2*(n>.5)-1;i(m-.5,2)+i(n-.5,2)>.25&&(n=f.sqrt(.25-i(m-.5,2))*e+.5)&&.5!=n&&(n=n.toFixed(5)-1e-5*e)}return l}),e=e.split(/\s*\-\s*/),"linear"==j){var t=e.shift();if(t=-d(t),isNaN(t))return null;var u=[0,0,f.cos(a.rad(t)),f.sin(a.rad(t))],v=1/(g(h(u[2]),h(u[3]))||1);u[2]*=v,u[3]*=v,u[2]<0&&(u[0]=-u[2],u[2]=0),u[3]<0&&(u[1]=-u[3],u[3]=0)}var w=a._parseDots(e);if(!w)return null;if(k=k.replace(/[\(\)\s,\xb0#]/g,"_"),b.gradient&&k!=b.gradient.id&&(p.defs.removeChild(b.gradient),delete b.gradient),!b.gradient){s=q(j+"Gradient",{id:k}),b.gradient=s,q(s,"radial"==j?{fx:m,fy:n}:{x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientTransform:b.matrix.invert()}),p.defs.appendChild(s);for(var x=0,y=w.length;y>x;x++)s.appendChild(q("stop",{offset:w[x].offset?w[x].offset:x?"100%":"0%","stop-color":w[x].color||"#fff"}))}}return q(o,{fill:"url(#"+k+")",opacity:1,"fill-opacity":1}),r.fill=l,r.opacity=1,r.fillOpacity=1,1},s=function(a){var b=a.getBBox(1);q(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},t=function(d,e,f){if("path"==d.type){for(var g,h,i,j,k,m=c(e).toLowerCase().split("-"),n=d.paper,r=f?"end":"start",s=d.node,t=d.attrs,u=t["stroke-width"],v=m.length,w="classic",x=3,y=3,z=5;v--;)switch(m[v]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":w=m[v];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":x=5;break;case"short":x=2}if("open"==w?(x+=2,y+=2,z+=2,i=1,j=f?4:1,k={fill:"none",stroke:t.stroke}):(j=i=x/2,k={fill:t.stroke,stroke:"none"}),d._.arrows?f?(d._.arrows.endPath&&p[d._.arrows.endPath]--,d._.arrows.endMarker&&p[d._.arrows.endMarker]--):(d._.arrows.startPath&&p[d._.arrows.startPath]--,d._.arrows.startMarker&&p[d._.arrows.startMarker]--):d._.arrows={},"none"!=w){var A="raphael-marker-"+w,B="raphael-marker-"+r+w+x+y;a._g.doc.getElementById(A)?p[A]++:(n.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:o[w],id:A})),p[A]=1);var C,D=a._g.doc.getElementById(B);D?(p[B]++,C=D.getElementsByTagName("use")[0]):(D=q(q("marker"),{id:B,markerHeight:y,markerWidth:x,orient:"auto",refX:j,refY:y/2}),C=q(q("use"),{"xlink:href":"#"+A,transform:(f?"rotate(180 "+x/2+" "+y/2+") ":l)+"scale("+x/z+","+y/z+")","stroke-width":(1/((x/z+y/z)/2)).toFixed(4)}),D.appendChild(C),n.defs.appendChild(D),p[B]=1),q(C,k);var E=i*("diamond"!=w&&"oval"!=w);f?(g=d._.arrows.startdx*u||0,h=a.getTotalLength(t.path)-E*u):(g=E*u,h=a.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),k={},k["marker-"+r]="url(#"+B+")",(h||g)&&(k.d=Raphael.getSubpath(t.path,g,h)),q(s,k),d._.arrows[r+"Path"]=A,d._.arrows[r+"Marker"]=B,d._.arrows[r+"dx"]=E,d._.arrows[r+"Type"]=w,d._.arrows[r+"String"]=e}else f?(g=d._.arrows.startdx*u||0,h=a.getTotalLength(t.path)-g):(g=0,h=a.getTotalLength(t.path)-(d._.arrows.enddx*u||0)),d._.arrows[r+"Path"]&&q(s,{d:Raphael.getSubpath(t.path,g,h)}),delete d._.arrows[r+"Path"],delete d._.arrows[r+"Marker"],delete d._.arrows[r+"dx"],delete d._.arrows[r+"Type"],delete d._.arrows[r+"String"];for(k in p)if(p[b](k)&&!p[k]){var F=a._g.doc.getElementById(k);F&&F.parentNode.removeChild(F)}}},u={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},v=function(a,b,d){if(b=u[c(b).toLowerCase()]){for(var e=a.attrs["stroke-width"]||"1",f={round:e,square:e,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,g=[],h=b.length;h--;)g[h]=b[h]*e+(h%2?1:-1)*f;q(a.node,{"stroke-dasharray":g.join(",")})}},w=function(d,f){var i=d.node,k=d.attrs,m=i.style.visibility;i.style.visibility="hidden";for(var o in f)if(f[b](o)){if(!a._availableAttrs[b](o))continue;var p=f[o];switch(k[o]=p,o){case"blur":d.blur(p);break;case"href":case"title":case"target":var u=i.parentNode;if("a"!=u.tagName.toLowerCase()){var w=q("a");u.insertBefore(w,i),w.appendChild(i),u=w}"target"==o?u.setAttributeNS(n,"show","blank"==p?"new":p):u.setAttributeNS(n,o,p);break;case"cursor":i.style.cursor=p;break;case"transform":d.transform(p);break;case"arrow-start":t(d,p);break;case"arrow-end":t(d,p,1);break;case"clip-rect":var x=c(p).split(j);if(4==x.length){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var z=q("clipPath"),A=q("rect");z.id=a.createUUID(),q(A,{x:x[0],y:x[1],width:x[2],height:x[3]}),z.appendChild(A),d.paper.defs.appendChild(z),q(i,{"clip-path":"url(#"+z.id+")"}),d.clip=A}if(!p){var B=i.getAttribute("clip-path");if(B){var C=a._g.doc.getElementById(B.replace(/(^url\(#|\)$)/g,l));C&&C.parentNode.removeChild(C),q(i,{"clip-path":l}),delete d.clip}}break;case"path":"path"==d.type&&(q(i,{d:p?k.path=a._pathToAbsolute(p):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1)));break;case"width":if(i.setAttribute(o,p),d._.dirty=1,!k.fx)break;o="x",p=k.x;case"x":k.fx&&(p=-k.x-(k.width||0));case"rx":if("rx"==o&&"rect"==d.type)break;case"cx":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"height":if(i.setAttribute(o,p),d._.dirty=1,!k.fy)break;o="y",p=k.y;case"y":k.fy&&(p=-k.y-(k.height||0));case"ry":if("ry"==o&&"rect"==d.type)break;case"cy":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"r":"rect"==d.type?q(i,{rx:p,ry:p}):i.setAttribute(o,p),d._.dirty=1;break;case"src":"image"==d.type&&i.setAttributeNS(n,"href",p);break;case"stroke-width":(1!=d._.sx||1!=d._.sy)&&(p/=g(h(d._.sx),h(d._.sy))||1),d.paper._vbSize&&(p*=d.paper._vbSize),i.setAttribute(o,p),k["stroke-dasharray"]&&v(d,k["stroke-dasharray"],f),d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"stroke-dasharray":v(d,p,f);break;case"fill":var D=c(p).match(a._ISURL);if(D){z=q("pattern");var E=q("image");z.id=a.createUUID(),q(z,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),q(E,{x:0,y:0,"xlink:href":D[1]}),z.appendChild(E),function(b){a._preload(D[1],function(){var a=this.offsetWidth,c=this.offsetHeight;q(b,{width:a,height:c}),q(E,{width:a,height:c}),d.paper.safari()})}(z),d.paper.defs.appendChild(z),q(i,{fill:"url(#"+z.id+")"}),d.pattern=z,d.pattern&&s(d);break}var F=a.getRGB(p);if(F.error){if(("circle"==d.type||"ellipse"==d.type||"r"!=c(p).charAt())&&r(d,p)){if("opacity"in k||"fill-opacity"in k){var G=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l));if(G){var H=G.getElementsByTagName("stop");q(H[H.length-1],{"stop-opacity":("opacity"in k?k.opacity:1)*("fill-opacity"in k?k["fill-opacity"]:1)})}}k.gradient=p,k.fill="none";break}}else delete f.gradient,delete k.gradient,!a.is(k.opacity,"undefined")&&a.is(f.opacity,"undefined")&&q(i,{opacity:k.opacity}),!a.is(k["fill-opacity"],"undefined")&&a.is(f["fill-opacity"],"undefined")&&q(i,{"fill-opacity":k["fill-opacity"]});F[b]("opacity")&&q(i,{"fill-opacity":F.opacity>1?F.opacity/100:F.opacity});case"stroke":F=a.getRGB(p),i.setAttribute(o,F.hex),"stroke"==o&&F[b]("opacity")&&q(i,{"stroke-opacity":F.opacity>1?F.opacity/100:F.opacity}),"stroke"==o&&d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"gradient":("circle"==d.type||"ellipse"==d.type||"r"!=c(p).charAt())&&r(d,p);break;case"opacity":k.gradient&&!k[b]("stroke-opacity")&&q(i,{"stroke-opacity":p>1?p/100:p});case"fill-opacity":if(k.gradient){G=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l)),G&&(H=G.getElementsByTagName("stop"),q(H[H.length-1],{"stop-opacity":p}));break}default:"font-size"==o&&(p=e(p,10)+"px");var I=o.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});i.style[I]=p,d._.dirty=1,i.setAttribute(o,p)}}y(d,f),i.style.visibility=m},x=1.2,y=function(d,f){if("text"==d.type&&(f[b]("text")||f[b]("font")||f[b]("font-size")||f[b]("x")||f[b]("y"))){var g=d.attrs,h=d.node,i=h.firstChild?e(a._g.doc.defaultView.getComputedStyle(h.firstChild,l).getPropertyValue("font-size"),10):10;if(f[b]("text")){for(g.text=f.text;h.firstChild;)h.removeChild(h.firstChild);for(var j,k=c(f.text).split("\n"),m=[],n=0,o=k.length;o>n;n++)j=q("tspan"),n&&q(j,{dy:i*x,x:g.x}),j.appendChild(a._g.doc.createTextNode(k[n])),h.appendChild(j),m[n]=j}else for(m=h.getElementsByTagName("tspan"),n=0,o=m.length;o>n;n++)n?q(m[n],{dy:i*x,x:g.x}):q(m[0],{dy:0});q(h,{x:g.x,y:g.y}),d._.dirty=1;var p=d._getBBox(),r=g.y-(p.y+p.height/2);r&&a.is(r,"finite")&&q(m[0],{dy:r})}},z=function(b,c){this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.matrix=a.matrix(),this.realPath=null,this.paper=c,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},A=a.el;z.prototype=A,A.constructor=z,a._engine.path=function(a,b){var c=q("path");b.canvas&&b.canvas.appendChild(c);var d=new z(c,b);return d.type="path",w(d,{fill:"none",stroke:"#000",path:a}),d},A.rotate=function(a,b,e){if(this.removed)return this;if(a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(b=e),null==b||null==e){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}return this.transform(this._.transform.concat([["r",a,b,e]])),this},A.scale=function(a,b,e,f){if(this.removed)return this;if(a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3])),a=d(a[0]),null==b&&(b=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]])),this},A.translate=function(a,b){return this.removed?this:(a=c(a).split(j),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this.transform(this._.transform.concat([["t",a,b]])),this)},A.transform=function(c){var d=this._;if(null==c)return d.transform;if(a._extractTransform(this,c),this.clip&&q(this.clip,{transform:this.matrix.invert()}),this.pattern&&s(this),this.node&&q(this.node,{transform:this.matrix}),1!=d.sx||1!=d.sy){var e=this.attrs[b]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":e})}return this},A.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},A.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},A.remove=function(){if(!this.removed){var b=this.paper;b.__set__&&b.__set__.exclude(this),k.unbind("*.*."+this.id),this.gradient&&b.defs.removeChild(this.gradient),a._tear(this,b),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var c in this)this[c]="function"==typeof this[c]?a._removedFactory(c):null;this.removed=!0}},A._getBBox=function(){if("none"==this.node.style.display){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}return a&&this.hide(),b},A.attr=function(c,d){if(this.removed)return this;if(null==c){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&a.is(c,"string")){if("fill"==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==c)return this._.transform;for(var g=c.split(j),h={},i=0,l=g.length;l>i;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return l-1?h:h[g[0]]}if(null==d&&a.is(c,"array")){for(h={},i=0,l=c.length;l>i;i++)h[c[i]]=this.attr(c[i]);return h}if(null!=d){var m={};m[c]=d}else null!=c&&a.is(c,"object")&&(m=c);for(var n in m)k("attr."+n+"."+this.id,this,m[n]);for(n in this.paper.customAttributes)if(this.paper.customAttributes[b](n)&&m[b](n)&&a.is(this.paper.customAttributes[n],"function")){var o=this.paper.customAttributes[n].apply(this,[].concat(m[n]));this.attrs[n]=m[n];for(var p in o)o[b](p)&&(m[p]=o[p])}return w(this,m),this},A.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var b=this.paper;return b.top!=this&&a._tofront(this,b),
this},A.toBack=function(){if(this.removed)return this;var b=this.node.parentNode;"a"==b.tagName.toLowerCase()?b.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):b.firstChild!=this.node&&b.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper);this.paper;return this},A.insertAfter=function(b){if(this.removed)return this;var c=b.node||b[b.length-1].node;return c.nextSibling?c.parentNode.insertBefore(this.node,c.nextSibling):c.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper),this},A.insertBefore=function(b){if(this.removed)return this;var c=b.node||b[0].node;return c.parentNode.insertBefore(this.node,c),a._insertbefore(this,b,this.paper),this},A.blur=function(b){var c=this;if(0!==+b){var d=q("filter"),e=q("feGaussianBlur");c.attrs.blur=b,d.id=a.createUUID(),q(e,{stdDeviation:+b||1.5}),d.appendChild(e),c.paper.defs.appendChild(d),c._blur=d,q(c.node,{filter:"url(#"+d.id+")"})}else c._blur&&(c._blur.parentNode.removeChild(c._blur),delete c._blur,delete c.attrs.blur),c.node.removeAttribute("filter")},a._engine.circle=function(a,b,c,d){var e=q("circle");a.canvas&&a.canvas.appendChild(e);var f=new z(e,a);return f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",q(e,f.attrs),f},a._engine.rect=function(a,b,c,d,e,f){var g=q("rect");a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",q(g,h.attrs),h},a._engine.ellipse=function(a,b,c,d,e){var f=q("ellipse");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);return g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",q(f,g.attrs),g},a._engine.image=function(a,b,c,d,e,f){var g=q("image");q(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(n,"href",b),a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);return h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image",h},a._engine.text=function(b,c,d,e){var f=q("text");b.canvas&&b.canvas.appendChild(f);var g=new z(f,b);return g.attrs={x:c,y:d,"text-anchor":"middle",text:e,font:a._availableAttrs.font,stroke:"none",fill:"#000"},g.type="text",w(g,g.attrs),g},a._engine.setSize=function(a,b){return this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b&&b.container,d=b.x,e=b.y,f=b.width,g=b.height;if(!c)throw new Error("SVG container not found.");var h,i=q("svg"),j="overflow:hidden;";return d=d||0,e=e||0,f=f||512,g=g||342,q(i,{height:g,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"}),1==c?(i.style.cssText=j+"position:absolute;left:"+d+"px;top:"+e+"px",a._g.doc.body.appendChild(i),h=1):(i.style.cssText=j+"position:relative",c.firstChild?c.insertBefore(i,c.firstChild):c.appendChild(i)),c=new a._Paper,c.width=f,c.height=g,c.canvas=i,c.clear(),c._left=c._top=0,h&&(c.renderfix=function(){}),c.renderfix(),c},a._engine.setViewBox=function(a,b,c,d,e){k("setViewBox",this,this._viewBox,[a,b,c,d,e]);var f,h,i=g(c/this.width,d/this.height),j=this.top,l=e?"meet":"xMinYMin";for(null==a?(this._vbSize&&(i=1),delete this._vbSize,f="0 0 "+this.width+m+this.height):(this._vbSize=i,f=a+m+b+m+c+m+d),q(this.canvas,{viewBox:f,preserveAspectRatio:l});i&&j;)h="stroke-width"in j.attrs?j.attrs["stroke-width"]:1,j.attr({"stroke-width":h}),j._.dirty=1,j._.dirtyT=1,j=j.prev;return this._viewBox=[a,b,c,d,!!e],this},a.prototype.renderfix=function(){var a,b=this.canvas,c=b.style;try{a=b.getScreenCTM()||b.createSVGMatrix()}catch(d){a=b.createSVGMatrix()}var e=-a.e%1,f=-a.f%1;(e||f)&&(e&&(this._left=(this._left+e)%1,c.left=this._left+"px"),f&&(this._top=(this._top+f)%1,c.top=this._top+"px"))},a.prototype.clear=function(){a.eve("clear",this);for(var b=this.canvas;b.firstChild;)b.removeChild(b.firstChild);this.bottom=this.top=null,(this.desc=q("desc")).appendChild(a._g.doc.createTextNode("Created with Raphaël "+a.version)),b.appendChild(this.desc),b.appendChild(this.defs=q("defs"))},a.prototype.remove=function(){k("remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):null};var B=a.st;for(var C in A)A[b](C)&&!B[b](C)&&(B[C]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(C))}(window.Raphael),window.Raphael.vml&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=Math,f=e.round,g=e.max,h=e.min,i=e.abs,j="fill",k=/[, ]+/,l=a.eve,m=" progid:DXImageTransform.Microsoft",n=" ",o="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},q=/([clmz]),?([^clmz]*)/gi,r=/ progid:\S+Blur\([^\)]+\)/g,s=/-?[^,\s-]+/g,t="position:absolute;left:0;top:0;width:1px;height:1px",u=21600,v={path:1,rect:1,image:1},w={circle:1,ellipse:1},x=function(b){var d=/[ahqstv]/gi,e=a._pathToAbsolute;if(c(b).match(d)&&(e=a._path2curve),d=/[clmz]/g,e==a._pathToAbsolute&&!c(b).match(d)){var g=c(b).replace(q,function(a,b,c){var d=[],e="m"==b.toLowerCase(),g=p[b];return c.replace(s,function(a){e&&2==d.length&&(g+=d+p["m"==b?"l":"L"],d=[]),d.push(f(a*u))}),g+d});return g}var h,i,j=e(b);g=[];for(var k=0,l=j.length;l>k;k++){h=j[k],i=j[k][0].toLowerCase(),"z"==i&&(i="x");for(var m=1,r=h.length;r>m;m++)i+=f(h[m]*u)+(m!=r-1?",":o);g.push(i)}return g.join(n)},y=function(b,c,d){var e=a.matrix();return e.rotate(-b,.5,.5),{dx:e.x(c,d),dy:e.y(c,d)}},z=function(a,b,c,d,e,f){var g=a._,h=a.matrix,k=g.fillpos,l=a.node,m=l.style,o=1,p="",q=u/b,r=u/c;if(m.visibility="hidden",b&&c){if(l.coordsize=i(q)+n+i(r),m.rotation=f*(0>b*c?-1:1),f){var s=y(f,d,e);d=s.dx,e=s.dy}if(0>b&&(p+="x"),0>c&&(p+=" y")&&(o=-1),m.flip=p,l.coordorigin=d*-q+n+e*-r,k||g.fillsize){var t=l.getElementsByTagName(j);t=t&&t[0],l.removeChild(t),k&&(s=y(f,h.x(k[0],k[1]),h.y(k[0],k[1])),t.position=s.dx*o+n+s.dy*o),g.fillsize&&(t.size=g.fillsize[0]*i(b)+n+g.fillsize[1]*i(c)),l.appendChild(t)}m.visibility="visible"}};a.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var A=function(a,b,d){for(var e=c(b).toLowerCase().split("-"),f=d?"end":"start",g=e.length,h="classic",i="medium",j="medium";g--;)switch(e[g]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":h=e[g];break;case"wide":case"narrow":j=e[g];break;case"long":case"short":i=e[g]}var k=a.node.getElementsByTagName("stroke")[0];k[f+"arrow"]=h,k[f+"arrowlength"]=i,k[f+"arrowwidth"]=j},B=function(e,i){e.attrs=e.attrs||{};var l=e.node,m=e.attrs,p=l.style,q=v[e.type]&&(i.x!=m.x||i.y!=m.y||i.width!=m.width||i.height!=m.height||i.cx!=m.cx||i.cy!=m.cy||i.rx!=m.rx||i.ry!=m.ry||i.r!=m.r),r=w[e.type]&&(m.cx!=i.cx||m.cy!=i.cy||m.r!=i.r||m.rx!=i.rx||m.ry!=i.ry),s=e;for(var t in i)i[b](t)&&(m[t]=i[t]);if(q&&(m.path=a._getPath[e.type](e),e._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(p.cursor=i.cursor),"blur"in i&&e.blur(i.blur),(i.path&&"path"==e.type||q)&&(l.path=x(~c(m.path).toLowerCase().indexOf("r")?a._pathToAbsolute(m.path):m.path),"image"==e.type&&(e._.fillpos=[m.x,m.y],e._.fillsize=[m.width,m.height],z(e,1,1,0,0,0))),"transform"in i&&e.transform(i.transform),r){var y=+m.cx,B=+m.cy,D=+m.rx||+m.r||0,E=+m.ry||+m.r||0;l.path=a.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",f((y-D)*u),f((B-E)*u),f((y+D)*u),f((B+E)*u),f(y*u))}if("clip-rect"in i){var G=c(i["clip-rect"]).split(k);if(4==G.length){G[2]=+G[2]+ +G[0],G[3]=+G[3]+ +G[1];var H=l.clipRect||a._g.doc.createElement("div"),I=H.style;I.clip=a.format("rect({1}px {2}px {3}px {0}px)",G),l.clipRect||(I.position="absolute",I.top=0,I.left=0,I.width=e.paper.width+"px",I.height=e.paper.height+"px",l.parentNode.insertBefore(H,l),H.appendChild(l),l.clipRect=H)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(e.textpath){var J=e.textpath.style;i.font&&(J.font=i.font),i["font-family"]&&(J.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,o)+'"'),i["font-size"]&&(J.fontSize=i["font-size"]),i["font-weight"]&&(J.fontWeight=i["font-weight"]),i["font-style"]&&(J.fontStyle=i["font-style"])}if("arrow-start"in i&&A(s,i["arrow-start"]),"arrow-end"in i&&A(s,i["arrow-end"],1),null!=i.opacity||null!=i["stroke-width"]||null!=i.fill||null!=i.src||null!=i.stroke||null!=i["stroke-width"]||null!=i["stroke-opacity"]||null!=i["fill-opacity"]||null!=i["stroke-dasharray"]||null!=i["stroke-miterlimit"]||null!=i["stroke-linejoin"]||null!=i["stroke-linecap"]){var K=l.getElementsByTagName(j),L=!1;if(K=K&&K[0],!K&&(L=K=F(j)),"image"==e.type&&i.src&&(K.src=i.src),i.fill&&(K.on=!0),(null==K.on||"none"==i.fill||null===i.fill)&&(K.on=!1),K.on&&i.fill){var M=c(i.fill).match(a._ISURL);if(M){K.parentNode==l&&l.removeChild(K),K.rotate=!0,K.src=M[1],K.type="tile";var N=e.getBBox(1);K.position=N.x+n+N.y,e._.fillpos=[N.x,N.y],a._preload(M[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else K.color=a.getRGB(i.fill).hex,K.src=o,K.type="solid",a.getRGB(i.fill).error&&(s.type in{circle:1,ellipse:1}||"r"!=c(i.fill).charAt())&&C(s,i.fill,K)&&(m.fill="none",m.gradient=i.fill,K.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var O=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+a.getRGB(i.fill).o+1||2)-1);O=h(g(O,0),1),K.opacity=O,K.src&&(K.color="none")}l.appendChild(K);var P=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],Q=!1;!P&&(Q=P=F("stroke")),(i.stroke&&"none"!=i.stroke||i["stroke-width"]||null!=i["stroke-opacity"]||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])&&(P.on=!0),("none"==i.stroke||null===i.stroke||null==P.on||0==i.stroke||0==i["stroke-width"])&&(P.on=!1);var R=a.getRGB(i.stroke);P.on&&i.stroke&&(P.color=R.hex),O=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+R.o+1||2)-1);var S=.75*(d(i["stroke-width"])||1);if(O=h(g(O,0),1),null==i["stroke-width"]&&(S=m["stroke-width"]),i["stroke-width"]&&(P.weight=S),S&&1>S&&(O*=S)&&(P.weight=1),P.opacity=O,i["stroke-linejoin"]&&(P.joinstyle=i["stroke-linejoin"]||"miter"),P.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(P.endcap="butt"==i["stroke-linecap"]?"flat":"square"==i["stroke-linecap"]?"square":"round"),i["stroke-dasharray"]){var T={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};P.dashstyle=T[b](i["stroke-dasharray"])?T[i["stroke-dasharray"]]:o}Q&&l.appendChild(P)}if("text"==s.type){s.paper.canvas.style.display=o;var U=s.paper.span,V=100,W=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);p=U.style,m.font&&(p.font=m.font),m["font-family"]&&(p.fontFamily=m["font-family"]),m["font-weight"]&&(p.fontWeight=m["font-weight"]),m["font-style"]&&(p.fontStyle=m["font-style"]),W=d(m["font-size"]||W&&W[0])||10,p.fontSize=W*V+"px",s.textpath.string&&(U.innerHTML=c(s.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var X=U.getBoundingClientRect();s.W=m.w=(X.right-X.left)/V,s.H=m.h=(X.bottom-X.top)/V,s.X=m.x,s.Y=m.y+s.H/2,("x"in i||"y"in i)&&(s.path.v=a.format("m{0},{1}l{2},{1}",f(m.x*u),f(m.y*u),f(m.x*u)+1));for(var Y=["x","y","text","font","font-family","font-weight","font-style","font-size"],Z=0,$=Y.length;$>Z;Z++)if(Y[Z]in i){s._.dirty=1;break}switch(m["text-anchor"]){case"start":s.textpath.style["v-text-align"]="left",s.bbx=s.W/2;break;case"end":s.textpath.style["v-text-align"]="right",s.bbx=-s.W/2;break;default:s.textpath.style["v-text-align"]="center",s.bbx=0}s.textpath.style["v-text-kern"]=!0}},C=function(b,f,g){b.attrs=b.attrs||{};var h=(b.attrs,Math.pow),i="linear",j=".5 .5";if(b.attrs.gradient=f,f=c(f).replace(a._radial_gradient,function(a,b,c){return i="radial",b&&c&&(b=d(b),c=d(c),h(b-.5,2)+h(c-.5,2)>.25&&(c=e.sqrt(.25-h(b-.5,2))*(2*(c>.5)-1)+.5),j=b+n+c),o}),f=f.split(/\s*\-\s*/),"linear"==i){var k=f.shift();if(k=-d(k),isNaN(k))return null}var l=a._parseDots(f);if(!l)return null;if(b=b.shape||b.node,l.length){b.removeChild(g),g.on=!0,g.method="none",g.color=l[0].color,g.color2=l[l.length-1].color;for(var m=[],p=0,q=l.length;q>p;p++)l[p].offset&&m.push(l[p].offset+n+l[p].color);g.colors=m.length?m.join():"0% "+g.color,"radial"==i?(g.type="gradientTitle",g.focus="100%",g.focussize="0 0",g.focusposition=j,g.angle=0):(g.type="gradient",g.angle=(270-k)%360),b.appendChild(g)}return 1},D=function(b,c){this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=c,this.matrix=a.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},E=a.el;D.prototype=E,E.constructor=D,E.transform=function(b){if(null==b)return this._.transform;var d,e=this.paper._viewBoxShift,f=e?"s"+[e.scale,e.scale]+"-1-1t"+[e.dx,e.dy]:o;e&&(d=b=c(b).replace(/\.{3}|\u2026/g,this._.transform||o)),a._extractTransform(this,f+b);var g,h=this.matrix.clone(),i=this.skew,j=this.node,k=~c(this.attrs.fill).indexOf("-"),l=!c(this.attrs.fill).indexOf("url(");if(h.translate(-.5,-.5),l||k||"image"==this.type)if(i.matrix="1 0 0 1",i.offset="0 0",g=h.split(),k&&g.noRotation||!g.isSimple){j.style.filter=h.toFilter();var m=this.getBBox(),p=this.getBBox(1),q=m.x-p.x,r=m.y-p.y;j.coordorigin=q*-u+n+r*-u,z(this,1,1,q,r,0)}else j.style.filter=o,z(this,g.scalex,g.scaley,g.dx,g.dy,g.rotate);else j.style.filter=o,i.matrix=c(h),i.offset=h.offset();return d&&(this._.transform=d),this},E.rotate=function(a,b,e){if(this.removed)return this;if(null!=a){if(a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),null==e&&(b=e),null==b||null==e){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",a,b,e]])),this}},E.translate=function(a,b){return this.removed?this:(a=c(a).split(k),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=b),this.transform(this._.transform.concat([["t",a,b]])),this)},E.scale=function(a,b,e,f){if(this.removed)return this;if(a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3]),isNaN(e)&&(e=null),isNaN(f)&&(f=null)),a=d(a[0]),null==b&&(b=a),null==f&&(e=f),null==e||null==f)var g=this.getBBox(1);return e=null==e?g.x+g.width/2:e,f=null==f?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]])),this._.dirtyT=1,this},E.hide=function(){return!this.removed&&(this.node.style.display="none"),this},E.show=function(){return!this.removed&&(this.node.style.display=o),this},E._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed){this.paper.__set__&&this.paper.__set__.exclude(this),a.eve.unbind("*.*."+this.id),a._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):null;this.removed=!0}},E.attr=function(c,d){if(this.removed)return this;if(null==c){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);return e.gradient&&"none"==e.fill&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform,e}if(null==d&&a.is(c,"string")){if(c==j&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var g=c.split(k),h={},i=0,m=g.length;m>i;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return m-1?h:h[g[0]]}if(this.attrs&&null==d&&a.is(c,"array")){for(h={},i=0,m=c.length;m>i;i++)h[c[i]]=this.attr(c[i]);return h}var n;null!=d&&(n={},n[c]=d),null==d&&a.is(c,"object")&&(n=c);for(var o in n)l("attr."+o+"."+this.id,this,n[o]);if(n){for(o in this.paper.customAttributes)if(this.paper.customAttributes[b](o)&&n[b](o)&&a.is(this.paper.customAttributes[o],"function")){var p=this.paper.customAttributes[o].apply(this,[].concat(n[o]));this.attrs[o]=n[o];for(var q in p)p[b](q)&&(n[q]=p[q])}n.text&&"text"==this.type&&(this.textpath.string=n.text),B(this,n)}return this},E.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&a._tofront(this,this.paper),this},E.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper)),this)},E.insertAfter=function(b){return this.removed?this:(b.constructor==a.st.constructor&&(b=b[b.length-1]),b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):b.node.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper),this)},E.insertBefore=function(b){return this.removed?this:(b.constructor==a.st.constructor&&(b=b[0]),b.node.parentNode.insertBefore(this.node,b.node),a._insertbefore(this,b,this.paper),this)},E.blur=function(b){var c=this.node.runtimeStyle,d=c.filter;d=d.replace(r,o),0!==+b?(this.attrs.blur=b,c.filter=d+n+m+".Blur(pixelradius="+(+b||1.5)+")",c.margin=a.format("-{0}px 0 0 -{0}px",f(+b||1.5))):(c.filter=d,c.margin=0,delete this.attrs.blur)},a._engine.path=function(a,b){var c=F("shape");c.style.cssText=t,c.coordsize=u+n+u,c.coordorigin=b.coordorigin;var d=new D(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a),d.type="path",d.path=[],d.Path=o,B(d,e),b.canvas.appendChild(c);var f=F("skew");return f.on=!0,c.appendChild(f),d.skew=f,d.transform(o),d},a._engine.rect=function(b,c,d,e,f,g){var h=a._rectPath(c,d,e,f,g),i=b.path(h),j=i.attrs;return i.X=j.x=c,i.Y=j.y=d,i.W=j.width=e,i.H=j.height=f,j.r=g,j.path=h,i.type="rect",i},a._engine.ellipse=function(a,b,c,d,e){var f=a.path();f.attrs;return f.X=b-d,f.Y=c-e,f.W=2*d,f.H=2*e,f.type="ellipse",B(f,{cx:b,cy:c,rx:d,ry:e}),f},a._engine.circle=function(a,b,c,d){var e=a.path();e.attrs;return e.X=b-d,e.Y=c-d,e.W=e.H=2*d,e.type="circle",B(e,{cx:b,cy:c,r:d}),e},a._engine.image=function(b,c,d,e,f,g){var h=a._rectPath(d,e,f,g),i=b.path(h).attr({stroke:"none"}),k=i.attrs,l=i.node,m=l.getElementsByTagName(j)[0];return k.src=c,i.X=k.x=d,i.Y=k.y=e,i.W=k.width=f,i.H=k.height=g,k.path=h,i.type="image",m.parentNode==l&&l.removeChild(m),m.rotate=!0,m.src=c,m.type="tile",i._.fillpos=[d,e],i._.fillsize=[f,g],l.appendChild(m),z(i,1,1,0,0,0),i},a._engine.text=function(b,d,e,g){var h=F("shape"),i=F("path"),j=F("textpath");d=d||0,e=e||0,g=g||"",i.v=a.format("m{0},{1}l{2},{1}",f(d*u),f(e*u),f(d*u)+1),i.textpathok=!0,j.string=c(g),j.on=!0,h.style.cssText=t,h.coordsize=u+n+u,h.coordorigin="0 0";var k=new D(h,b),l={fill:"#000",stroke:"none",font:a._availableAttrs.font,text:g};k.shape=h,k.path=i,k.textpath=j,k.type="text",k.attrs.text=c(g),k.attrs.x=d,k.attrs.y=e,k.attrs.w=1,k.attrs.h=1,B(k,l),h.appendChild(j),h.appendChild(i),b.canvas.appendChild(h);var m=F("skew");return m.on=!0,h.appendChild(m),k.skew=m,k.transform(o),k},a._engine.setSize=function(b,c){var d=this.canvas.style;return this.width=b,this.height=c,b==+b&&(b+="px"),c==+c&&(c+="px"),d.width=b,d.height=c,d.clip="rect(0 "+b+" "+c+" 0)",this._viewBox&&a._engine.setViewBox.apply(this,this._viewBox),this},a._engine.setViewBox=function(b,c,d,e,f){a.eve("setViewBox",this,this._viewBox,[b,c,d,e,f]);var h,i,j=this.width,k=this.height,l=1/g(d/j,e/k);return f&&(h=k/e,i=j/d,j>d*h&&(b-=(j-d*h)/2/h),k>e*i&&(c-=(k-e*i)/2/i)),this._viewBox=[b,c,d,e,!!f],this._viewBoxShift={dx:-b,dy:-c,scale:l},this.forEach(function(a){a.transform("...")}),this};var F;a._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),F=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){F=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},a._engine.initWin(a._g.win),a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b.container,d=b.height,e=b.width,f=b.x,g=b.y;if(!c)throw new Error("VML container not found.");var h=new a._Paper,i=h.canvas=a._g.doc.createElement("div"),j=i.style;return f=f||0,g=g||0,e=e||512,d=d||342,h.width=e,h.height=d,e==+e&&(e+="px"),d==+d&&(d+="px"),h.coordsize=1e3*u+n+1e3*u,h.coordorigin="0 0",h.span=a._g.doc.createElement("span"),h.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",i.appendChild(h.span),j.cssText=a.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",e,d),1==c?(a._g.doc.body.appendChild(i),j.left=f+"px",j.top=g+"px",j.position="absolute"):c.firstChild?c.insertBefore(i,c.firstChild):c.appendChild(i),h.renderfix=function(){},h},a.prototype.clear=function(){a.eve("clear",this),this.canvas.innerHTML=o,this.span=a._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},a.prototype.remove=function(){a.eve("remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]="function"==typeof this[b]?a._removedFactory(b):null;return!0};var G=a.st;for(var H in E)E[b](H)&&!G[b](H)&&(G[H]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(H))}(window.Raphael),Raphael.el.popup=function(a,b,c,d){var e,f,g,h,i=this.paper||this[0].paper;if(i){switch(this.type){case"text":case"circle":case"ellipse":f=!0;break;default:f=!1}return a=null==a?"up":a,b=b||5,e=this.getBBox(),c="number"==typeof c?c:f?e.x+e.width/2:e.x,d="number"==typeof d?d:f?e.y+e.height/2:e.y,g=Math.max(e.width/2-b,0),h=Math.max(e.height/2-b,0),this.translate(c-e.x-(f?e.width/2:0),d-e.y-(f?e.height/2:0)),e=this.getBBox(),c={up:["M",c,d,"l",-b,-b,-g,0,"a",b,b,0,0,1,-b,-b,"l",0,-e.height,"a",b,b,0,0,1,b,-b,"l",2*b+2*g,0,"a",b,b,0,0,1,b,b,"l",0,e.height,"a",b,b,0,0,1,-b,b,"l",-g,0,"z"].join(),down:["M",c,d,"l",b,b,g,0,"a",b,b,0,0,1,b,b,"l",0,e.height,"a",b,b,0,0,1,-b,b,"l",-(2*b+2*g),0,"a",b,b,0,0,1,-b,-b,"l",0,-e.height,"a",b,b,0,0,1,b,-b,"l",g,0,"z"].join(),left:["M",c,d,"l",-b,b,0,h,"a",b,b,0,0,1,-b,b,"l",-e.width,0,"a",b,b,0,0,1,-b,-b,"l",0,-(2*b+2*h),"a",b,b,0,0,1,b,-b,"l",e.width,0,"a",b,b,0,0,1,b,b,"l",0,h,"z"].join(),right:["M",c,d,"l",b,-b,0,-h,"a",b,b,0,0,1,b,-b,"l",e.width,0,"a",b,b,0,0,1,b,b,"l",0,2*b+2*h,"a",b,b,0,0,1,-b,b,"l",-e.width,0,"a",b,b,0,0,1,-b,-b,"l",0,-h,"z"].join()},b={up:{x:-!f*(e.width/2),y:2*-b-(f?e.height/2:e.height)},down:{x:-!f*(e.width/2),y:2*b+(f?e.height/2:e.height)},left:{x:2*-b-(f?e.width/2:e.width),y:-!f*(e.height/2)},right:{x:2*b+(f?e.width/2:e.width),y:-!f*(e.height/2)}}[a],this.translate(b.x,b.y),i.path(c[a]).attr({fill:"#000",stroke:"none"}).insertBefore(this.node?this:this[0])}},Raphael.el.tag=function(a,b,c,d){var e=this.paper||this[0].paper;if(e){var f,g,h,e=e.path().attr({fill:"#000",stroke:"#000"}),i=this.getBBox();switch(this.type){case"text":case"circle":case"ellipse":h=!0;break;default:h=!1}return a=a||0,c="number"==typeof c?c:h?i.x+i.width/2:i.x,d="number"==typeof d?d:h?i.y+i.height/2:i.y,b=null==b?5:b,g=.5522*b,i.height>=2*b?e.attr({path:["M",c,d+b,"a",b,b,0,1,1,0,2*-b,b,b,0,1,1,0,2*b,"m",0,2*-b-3,"a",b+3,b+3,0,1,0,0,2*(b+3),"L",c+b+3,d+i.height/2+3,"l",i.width+6,0,0,-i.height-6,-i.width-6,0,"L",c,d-b-3].join()}):(f=Math.sqrt(Math.pow(b+3,2)-Math.pow(i.height/2+3,2)),e.attr({path:["M",c,d+b,"c",-g,0,-b,g-b,-b,-b,0,-g,b-g,-b,b,-b,g,0,b,b-g,b,b,0,g,g-b,b,-b,b,"M",c+f,d-i.height/2-3,"a",b+3,b+3,0,1,0,0,i.height+6,"l",b+3-f+i.width+6,0,0,-i.height-6,"L",c+f,d-i.height/2-3].join()})),a=360-a,e.rotate(a,c,d),this.attrs?(this.attr(this.attrs.x?"x":"cx",c+b+3+(h?i.width/2:"text"==this.type?i.width:0)).attr("y",h?d:d-i.height/2),this.rotate(a,c,d),a>90&&270>a&&this.attr(this.attrs.x?"x":"cx",c-b-3-(h?i.width/2:i.width)).rotate(180,c,d)):a>90&&270>a?(this.translate(c-i.x-i.width-b-3,d-i.y-i.height/2),this.rotate(a-180,i.x+i.width+b+3,i.y+i.height/2)):(this.translate(c-i.x+b+3,d-i.y-i.height/2),this.rotate(a,i.x-b-3,i.y+i.height/2)),e.insertBefore(this.node?this:this[0])}},Raphael.el.drop=function(a,b,c){var d,e,f=this.getBBox(),g=this.paper||this[0].paper;if(g){switch(this.type){case"text":case"circle":case"ellipse":d=!0;break;default:d=!1}return a=a||0,b="number"==typeof b?b:d?f.x+f.width/2:f.x,c="number"==typeof c?c:d?f.y+f.height/2:f.y,e=Math.max(f.width,f.height)+Math.min(f.width,f.height),g=g.path(["M",b,c,"l",e,0,"A",.4*e,.4*e,0,1,0,b+.7*e,c-.7*e,"z"]).attr({fill:"#000",stroke:"none"}).rotate(22.5-a,b,c),a=(a+90)*Math.PI/180,b=b+e*Math.sin(a)-(d?0:f.width/2),a=c+e*Math.cos(a)-(d?0:f.height/2),this.attrs?this.attr(this.attrs.x?"x":"cx",b).attr(this.attrs.y?"y":"cy",a):this.translate(b-f.x,a-f.y),g.insertBefore(this.node?this:this[0])}},Raphael.el.flag=function(a,b,c){var d=this.paper||this[0].paper;if(d){var e,d=d.path().attr({fill:"#000",stroke:"#000"}),f=this.getBBox(),g=f.height/2;switch(this.type){case"text":case"circle":case"ellipse":e=!0;break;default:e=!1}return a=a||0,b="number"==typeof b?b:e?f.x+f.width/2:f.x,c="number"==typeof c?c:e?f.y+f.height/2:f.y,d.attr({path:["M",b,c,"l",g+3,-g-3,f.width+6,0,0,f.height+6,-f.width-6,0,"z"].join()}),a=360-a,d.rotate(a,b,c),this.attrs?(this.attr(this.attrs.x?"x":"cx",b+g+3+(e?f.width/2:"text"==this.type?f.width:0)).attr("y",e?c:c-f.height/2),this.rotate(a,b,c),a>90&&270>a&&this.attr(this.attrs.x?"x":"cx",b-g-3-(e?f.width/2:f.width)).rotate(180,b,c)):a>90&&270>a?(this.translate(b-f.x-f.width-g-3,c-f.y-f.height/2),this.rotate(a-180,f.x+f.width+g+3,f.y+f.height/2)):(this.translate(b-f.x+g+3,c-f.y-f.height/2),this.rotate(a,f.x-g-3,f.y+f.height/2)),d.insertBefore(this.node?this:this[0])}},Raphael.el.label=function(){var a=this.getBBox(),b=this.paper||this[0].paper,c=Math.min(20,a.width+10,a.height+10)/2;return b?b.rect(a.x-c/2,a.y-c/2,a.width+c,a.height+c,c).attr({stroke:"none",fill:"#000"}).insertBefore(this.node?this:this[0]):void 0},Raphael.el.blob=function(a,b,c){var d,e,f=this.getBBox(),g=Math.PI/180,h=this.paper||this[0].paper;if(h){switch(this.type){case"text":case"circle":case"ellipse":d=!0;break;default:d=!1}h=h.path().attr({fill:"#000",stroke:"none"}),a=(+a+1?a:45)+90,e=Math.min(f.height,f.width);var b="number"==typeof b?b:d?f.x+f.width/2:f.x,c="number"==typeof c?c:d?f.y+f.height/2:f.y,i=Math.max(f.width+e,25*e/12),j=Math.max(f.height+e,25*e/12);d=b+e*Math.sin((a-22.5)*g);var k=c+e*Math.cos((a-22.5)*g),l=b+e*Math.sin((a+22.5)*g),a=c+e*Math.cos((a+22.5)*g),g=(l-d)/2;e=(a-k)/2;var i=i/2,j=j/2,m=-Math.sqrt(Math.abs(i*i*j*j-i*i*e*e-j*j*g*g)/(i*i*e*e+j*j*g*g));return e=m*i*e/j+(l+d)/2,g=m*-j*g/i+(a+k)/2,h.attr({x:e,y:g,path:["M",b,c,"L",l,a,"A",i,j,0,1,1,d,k,"z"].join()}),this.translate(e-f.x-f.width/2,g-f.y-f.height/2),h.insertBefore(this.node?this:this[0])}},Raphael.fn.label=function(a,b,c){var d=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return d.push(c.label(),c)},Raphael.fn.popup=function(a,b,c,d,e){var f=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return f.push(c.popup(d,e),c)},Raphael.fn.tag=function(a,b,c,d,e){var f=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return f.push(c.tag(d,e),c)},Raphael.fn.flag=function(a,b,c,d){var e=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return e.push(c.flag(d),c)},Raphael.fn.drop=function(a,b,c,d){var e=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return e.push(c.drop(d),c)},Raphael.fn.blob=function(a,b,c,d){var e=this.set(),c=this.text(a,b,c).attr(Raphael.g.txtattr);return e.push(c.blob(d),c)},Raphael.el.lighter=function(a){var a=a||2,b=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[b[0],b[1]],b[0]=Raphael.rgb2hsb(Raphael.getRGB(b[0]).hex),b[1]=Raphael.rgb2hsb(Raphael.getRGB(b[1]).hex),b[0].b=Math.min(b[0].b*a,1),b[0].s/=a,b[1].b=Math.min(b[1].b*a,1),b[1].s/=a,this.attr({fill:"hsb("+[b[0].h,b[0].s,b[0].b]+")",stroke:"hsb("+[b[1].h,b[1].s,b[1].b]+")"}),this},Raphael.el.darker=function(a){var a=a||2,b=[this.attrs.fill,this.attrs.stroke];return this.fs=this.fs||[b[0],b[1]],b[0]=Raphael.rgb2hsb(Raphael.getRGB(b[0]).hex),b[1]=Raphael.rgb2hsb(Raphael.getRGB(b[1]).hex),b[0].s=Math.min(b[0].s*a,1),b[0].b/=a,b[1].s=Math.min(b[1].s*a,1),b[1].b/=a,this.attr({fill:"hsb("+[b[0].h,b[0].s,b[0].b]+")",stroke:"hsb("+[b[1].h,b[1].s,b[1].b]+")"}),this},Raphael.el.resetBrightness=function(){return this.fs&&(this.attr({fill:this.fs[0],stroke:this.fs[1]}),delete this.fs),this},function(){var a,b=["lighter","darker","resetBrightness"],c="popup tag flag label drop blob".split(" ");for(a in c)(function(a){Raphael.st[a]=function(){return Raphael.el[a].apply(this,arguments)}})(c[a]);for(a in b)(function(a){Raphael.st[a]=function(){for(var b=0;b<this.length;b++)this[b][a].apply(this[b],arguments);return this}})(b[a])}(),Raphael.g={shim:{stroke:"none",fill:"#000","fill-opacity":0},txtattr:{font:"12px Arial, sans-serif",fill:"#fff"},colors:function(){for(var a=[.6,.2,.05,.1333,.75,0],b=[],c=0;10>c;c++)c<a.length?b.push("hsb("+a[c]+",.75, .75)"):b.push("hsb("+a[c-a.length]+", 1, .5)");return b}(),snapEnds:function(a,b,c){function d(a){return.25>Math.abs(a-.5)?~~a+.5:Math.round(a)}var e=a,f=b;if(e==f)return{from:e,to:f,power:0};var e=(f-e)/c,g=f=~~e,c=0;if(f){for(;g;)c--,g=~~(e*Math.pow(10,c))/Math.pow(10,c);c++}else{if(0!=e&&isFinite(e))for(;!f;)c=c||1,f=~~(e*Math.pow(10,c))/Math.pow(10,c),c++;else c=1;c&&c--}return f=d(b*Math.pow(10,c))/Math.pow(10,c),b>f&&(f=d((b+.5)*Math.pow(10,c))/Math.pow(10,c)),e=d((a-(c>0?0:.5))*Math.pow(10,c))/Math.pow(10,c),{from:e,to:f,power:c}},axis:function(a,b,c,d,e,f,g,h,i,j,k){var j=null==j?2:j,i=i||"t",f=f||10,k=arguments[arguments.length-1],l="|"==i||" "==i?["M",a+.5,b,"l",0,.001]:1==g||3==g?["M",a+.5,b,"l",0,-c]:["M",a,b+.5,"l",c,0],m=this.snapEnds(d,e,f),n=m.from,o=m.to,p=m.power,q=0,r={font:"11px 'Fontin Sans', Fontin-Sans, sans-serif"},m=k.set(),o=(o-n)/f,s=n,t=p>0?p:0,u=c/f;if(1==+g||3==+g){for(p=b,n=(g-1?1:-1)*(j+3+!!(g-1));p>=b-c;)"-"!=i&&" "!=i&&(l=l.concat(["M",a-("+"==i||"|"==i?j:2*!(g-1)*j),p+.5,"l",2*j+1,0])),m.push(k.text(a+n,p,h&&h[q++]||(Math.round(s)==s?s:+s.toFixed(t))).attr(r).attr({"text-anchor":g-1?"start":"end"})),s+=o,p-=u;Math.round(p+u-(b-c))&&("-"!=i&&" "!=i&&(l=l.concat(["M",a-("+"==i||"|"==i?j:2*!(g-1)*j),b-c+.5,"l",2*j+1,0])),m.push(k.text(a+n,b-c,h&&h[q]||(Math.round(s)==s?s:+s.toFixed(t))).attr(r).attr({"text-anchor":g-1?"start":"end"})))}else{for(var s=n,t=(p>0)*p,n=(g?-1:1)*(j+9+!g),p=a,u=c/f,v=0,w=0;a+c>=p;)"-"!=i&&" "!=i&&(l=l.concat(["M",p+.5,b-("+"==i?j:2*!!g*j),"l",0,2*j+1])),m.push(v=k.text(p,b+n,h&&h[q++]||(Math.round(s)==s?s:+s.toFixed(t))).attr(r)),v=v.getBBox(),w>=v.x-5?m.pop(m.length-1).remove():w=v.x+v.width,s+=o,p+=u;Math.round(p-u-a-c)&&("-"!=i&&" "!=i&&(l=l.concat(["M",a+c+.5,b-("+"==i?j:2*!!g*j),"l",0,2*j+1])),m.push(k.text(a+c,b+n,h&&h[q]||(Math.round(s)==s?s:+s.toFixed(t))).attr(r)))}return l=k.path(l),l.text=m,l.all=k.set([l,m]),l.remove=function(){this.text.remove(),this.constructor.prototype.remove.call(this)},l},labelise:function(a,b,c){return a?(a+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(a,d,e){return d?(+b).toFixed(d.replace(/^#+\.?/g,"").length):e?(100*b/c).toFixed(e.replace(/^%+\.?/g,"").length)+"%":void 0}):(+b).toFixed(0)}},function(){function a(a,b,c,d,e,f){function g(a,b,c,d,e,f){var g=Math.PI/180,h=a+c*Math.cos(-d*g),i=a+c*Math.cos(-e*g),j=a+c/2*Math.cos(-(d+(e-d)/2)*g),k=b+c*Math.sin(-d*g),l=b+c*Math.sin(-e*g),m=b+c/2*Math.sin(-(d+(e-d)/2)*g),n=["M",a,b,"L",h,k,"A",c,c,0,+(Math.abs(e-d)>180),1,i,l,"z"];return n.middle={x:j,y:m},n}f=f||{};var h=this,i=[],j=a.set(),k=a.set(),l=a.set(),m=e.length,n=0,o=0,p=0,q=f.maxSlices||100,r=parseFloat(f.minPercent)||1,s=Boolean(r);if(k.covers=j,1==m)l.push(a.circle(b,c,d).attr({fill:f.colors&&f.colors[0]||h.colors[0],
stroke:f.stroke||"#fff","stroke-width":null==f.strokewidth?1:f.strokewidth})),j.push(a.circle(b,c,d).attr(h.shim)),o=e[0],e[0]={value:e[0],order:0,valueOf:function(){return this.value}},f.href&&f.href[0]&&j[0].attr({href:f.href[0]}),l[0].middle={x:b,y:c},l[0].mangle=180;else{for(var t=0;m>t;t++)o+=e[t],e[t]={value:e[t],order:t,valueOf:function(){return this.value}};for(e.sort(function(a,b){return b.value-a.value}),t=0;m>t;t++)s&&100*e[t]/o<r&&(q=t,s=!1),t>q&&(s=!1,e[q].value+=e[t],e[q].others=!0,p=e[q].value);for(m=Math.min(q+1,e.length),p&&e.splice(m)&&(e[q].others=!0),t=0;m>t;t++){var u=n-360*e[t]/o/2;if(t||(n=f.startFromFixedAngle?f.startFromFixedAngle:90-u,u=n-360*e[t]/o/2),f.init)var v=g(b,c,1,n,n-360*e[t]/o).join(",");var w=g(b,c,d,n,n-=360*e[t]/o),x=f.matchColors&&1==f.matchColors?e[t].order:t,y=a.path(f.init?v:w).attr({fill:f.colors&&f.colors[x]||h.colors[x]||"#666",stroke:f.stroke||"#fff","stroke-width":null==f.strokewidth?1:f.strokewidth,"stroke-linejoin":"round"});y.value=e[t],y.middle=w.middle,y.mangle=u,i.push(y),l.push(y),f.init&&y.animate({path:w.join(",")},+f.init-1||1e3,">")}for(t=0;m>t;t++)y=a.path(i[t].attr("path")).attr(h.shim),f.href&&f.href[t]&&y.attr({href:f.href[t]}),y.attr=function(){},j.push(y),l.push(y)}k.hover=function(a,f){f=f||function(){};for(var g=this,h=0;m>h;h++)!function(h,i,j){var k={sector:h,cover:i,cx:b,cy:c,mx:h.middle.x,my:h.middle.y,mangle:h.mangle,r:d,value:e[j],total:o,label:g.labels&&g.labels[j]};i.mouseover(function(){a.call(k)}).mouseout(function(){f.call(k)})}(l[h],j[h],h);return this},k.each=function(a){for(var f=this,g=0;m>g;g++)!function(g,h,i){var j={sector:g,cover:h,cx:b,cy:c,x:g.middle.x,y:g.middle.y,mangle:g.mangle,r:d,value:e[i],total:o,label:f.labels&&f.labels[i]};a.call(j)}(l[g],j[g],g);return this},k.click=function(a){for(var f=this,g=0;m>g;g++)!function(g,h,i){var j={sector:g,cover:h,cx:b,cy:c,mx:g.middle.x,my:g.middle.y,mangle:g.mangle,r:d,value:e[i],total:o,label:f.labels&&f.labels[i]};h.click(function(){a.call(j)})}(l[g],j[g],g);return this},k.inject=function(a){a.insertBefore(j[0])};var z=function(g,i,n,p){var q=b+d+d/5,r=c,s=r+10;g=g||[],p=p&&p.toLowerCase&&p.toLowerCase()||"east",n=a[n&&n.toLowerCase()]||"circle",k.labels=a.set();for(var t=0;m>t;t++){var u,v=l[t].attr("fill"),w=e[t].order;e[t].others&&(g[w]=i||"Others"),g[w]=h.labelise(g[w],e[t],o),k.labels.push(a.set()),k.labels[t].push(a[n](q+5,s,5).attr({fill:v,stroke:"none"})),k.labels[t].push(u=a.text(q+20,s,g[w]||e[w]).attr(h.txtattr).attr({fill:f.legendcolor||"#000","text-anchor":"start"})),j[t].label=k.labels[t],s+=1.2*u.getBBox().height}var x=k.labels.getBBox(),y={east:[0,-x.height/2],west:[-x.width-2*d-20,-x.height/2],north:[-d-x.width/2,-d-x.height-10],south:[-d-x.width/2,d+10]}[p];k.labels.translate.apply(k.labels,y),k.push(k.labels)};return f.legend&&z(f.legend,f.legendothers,f.legendmark,f.legendpos),k.push(l,j),k.series=l,k.covers=j,k}var b=function(){};b.prototype=Raphael.g,a.prototype=new b,Raphael.fn.piechart=function(b,c,d,e,f){return new a(this,b,c,d,e,f)}}(),function(a,b,c){function d(a){return b("<div />").text(a).html()}function e(a,b,c){N[b]=window.setTimeout(function(){N[b]={element:a,remove:c}},500)}function f(a){var b=N[a];b&&"object"!=typeof b&&window.clearTimeout(b),delete N[a]}function g(){var a=null;return b.each(N,function(b,c){return c&&"object"==typeof c?(a=c,!1):void 0}),a}function h(){return b("#comment_text:focus").length>0}function i(a){return function(c){c&&c.length?b(a).addClass("suggested"):b(a).removeClass("suggested")}}function j(a){return a.data("suggestedTo",null).popover("destroy").next(".popover-suggested").remove(),function(c){c&&c.length&&(a.data("suggestedTo",c),a.parents(".suggested").length>0&&(a.popover({trigger:"hover",html:!0,viewport:a.parents(".listings")[0]||"body",placement:"bottom",title:"Already Suggested",template:'<div class="popover popover-suggested" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',content:function(){var a=b(this).data("suggestedTo")||[];return"<ul>"+a.map(function(a){return"<li> "+d(a.fullname||[a.firstname,a.middlename,a.lastname].join(" "))+"</li>"}).join("")+"</ul>"}}),a.popover("show")))}}function k(a){var b=u(a);if(key=b.entity.id,key){if(K&&K.sameAs(key)){if(K.relatedTo(b.$listing))return}else K&&K.cancelPending(),K=new O(key,{related:b.$listing});Array.isArray(key)&&key.length<=1&&K.done(i(b.els())),K.done(j(b.$btn))}}function l(a){if(!h()){if(a.is(".no-toggles"))return;if(b(".toolbar-open").removeClass("toolbar-open"),a.is("tr")){var c=a.find(".hcmenu");a=c.length?c:a.find("td:last-child"),0===a.find(".hover-wrapper").length&&a.prepend('<div class="hover-wrapper"></div>'),a=a.find(".hover-wrapper")}a.addClass("toolbar-open"),a.append(H),H.stop(!0,!0).fadeIn(250)}}function m(a){var c=a.find(".hover-wrapper")[0];h()||(b('[data-toggle="dropdown"]').parent().removeClass("open"),b(".btn-toggle-comment").removeData("comments-popover"),b(".comments-popover").remove(),H.stop(!0,!0).fadeOut(250,function(){H.parent()[0]===c&&H.appendTo(I)}),a.removeClass("toolbar-open"))}function n(a){return a.find("#hover-toolbar:visible").length>0}function o(a){return a.fullname||[a.firstname,a.middlename,a.lastname].join(" ")}function p(a){return a.customLists}function q(a){return"modal"==a.$target.data("list-target")||"modal"==a.$btn.data("list-target")}function r(a,c){c=c||"Add ";var d=b.makeArray(a).length;return d>1?c+'<span class="badge">'+d+"</span> Listings To":c+'<span class="badge">1</span> Listing To'}function s(a){var c=a.$btn.siblings("ul"),d={$list:c,divider:"auto",idField:"id",displayField:"title",className:"list-id",append:!1,dialogClass:"add-to-dialog",menuLimit:v(a,170),dialogTitle:r(a.entity.id),modal:q(a)};b("#add-to-new-list-dialog .modal-title").html(d.dialogTitle+" New List"),b("#add-to-new-list-dialog .btn-create-list").prop("disabled",!0);var e=b("#add-to-new-list-dialog");e.data("context",a),b("#to-dialog").data("context",a),A(x(p),d)}function t(a){var b={$list:null,divider:!1,idField:"_id",displayField:o,className:"add-to-client-list",append:!0,dialogClass:"select-client-dialog",menuLimit:v(a,120),modal:!0,dialogTitle:r(a.entity.id)+" Client's List",back:function(){s(a)}};A(y(),b)}function u(a){var c=b(a.target),d=c.is("button,a")?b(a.target):b(a.target).parents("button"),e=d.parents("[data-id]"),f=e.data("id"),g={id:f},h=e.parents("[data-collection]"),i=h.data("collection");return{$target:c,entity:g,list:i,$listing:e,$btn:d,els:function(){var a=f instanceof Array?f:[f],c=b.map(a,function(a,b){return"[data-id="+JSON.stringify(a.id||a)+"]"});return b(c.join(",")).filter(":not(.full,[data-ignore-classes])")}}}function v(a,c){var d=b(window).height()+b(window).scrollTop()-a.$btn.offset().top-c;return d>0?Math.min(Math.floor(d/40),5):null}function w(a,c){return K&&K.sameAs(a)&&(K=null),b.Deferred(function(d){b.post("/lists/suggestions/remove",{client:c,keys:a}).done(function(){d.resolve(!0)}).fail(function(){d.reject(!1)})}).promise()}function x(a,c){return b.Deferred(function(d){var e="/lists.names";c&&(e+="?client="+c),b.getJSON(e).done(function(b){a&&(b=a(b)),d.resolve(b||[])}).fail(function(){d.reject(null)})}).promise()}function y(a){return b.Deferred(function(c){b.getJSON("/clients?status=active").done(function(b){a&&(b=a(b)),c.resolve(b||[])}).fail(function(){c.reject(null)})}).promise()}function z(a){return b.Deferred(function(c){b.getJSON("/lists/suggestions",{keys:a,$basic:!0}).done(function(a){c.resolve(a||[])}).fail(function(){c.reject(null)})})}function A(a,c){function e(a){var b=d(a[m]),c=d(o(a)),e=(this.button?"btn btn-default ":"")+l;return'<li data-value="'+b+'"><a role="button" class="'+e+'">'+c+"</a></li>"}function f(a,b){var c=d(a[m]),e=d(o(a));return'<li data-index="'+b+'" class="active-item" data-value="'+c+'"><a role="button" class="btn btn-default"> '+e+"</a></li>"}c=c||{};var g=c.menuLimit||5,h=c.toggle===!0,i=c.multiselect===!0,j=c.$list||b(),k=b("#to-dialog"),l=c.className||"list-id",m=c.idField||"id",n=c.displayField||"title",o=n,p=!1,q={};"function"!=typeof o&&(o=function(a){return a[n]}),c.modal&&(k.find(".modal-title").html(c.dialogTitle),k.find("ul").html('<li><span style="text-align: center">Loading ...</span></li>'),k.addClass(c.dialogClass)),k[h?"addClass":"removeClass"]("use-toggle-buttons"),k.find(".btn-send").text(c.sendButtonText||"Send").prop("disabled","disabled").off("click.toggleModified").one("click.toggleModified",function(){p=!0});var r=[a];c.active&&c.active.data&&(c.active.data.promise?r.push(c.active.data.promise):r.push(c.active.data));var s=b.when.apply(b,r).done(function(a,d){function l(f){var g=b(this),h=g.parents("ul"),i=g.data("index"),j=d[i];return p=!0,c.active.deactivate&&b.when(c.active.deactivate(j)).done(function(){g.remove(),i=a.push(j)-1,g=e.call({button:!0},j,i),h.find(".divider.active-item").before(g),h.find(".active-item:not(.divider)").length<=0&&h.find(".active-item.divider").addClass("hide")}),r++,r>=d.length&&c.active.emptied&&c.active.emptied(),f.preventDefault(),!1}function n(a,d,e){var f=d[m],g=f in q;if(!i)for(var h in q)q[h].$button.removeClass("btn-primary").addClass("btn-default"),delete q[h];e.removeClass("btn-default btn-primary").addClass(g?"btn-default":"btn-primary"),g?delete q[f]:q[f]={item:d,$button:e};var j=!b.isEmptyObject(q);k.find(".modal-footer .btn-send").prop("disabled",j?null:"disabled"),c.activate&&c.activate(Object.keys(q).map(function(a){return q[a]}))}function o(d){var e=b(this);if(e.parent().data("value")){var f=e.parent(),g=a[f.index()];void 0!==g&&(h?n(d,g,e):c.activate&&(p=!0,c.activate(g)))}}var r=0;a.length&&d&&d.length&&(a=a.filter(function(a){var b=a[m];return!d.some(function(a){return a&&a[m]==b})}));var s=a.map(e,{}),t="";if(a.length>g||c.modal){var u=a.map(e,{button:!0});if((a||[]).length||(d||[]).length)a.length>g&&(s=a.slice(0,g).map(e,{}),s.push('<li role="presentation" class="more-options"><a role="menuitem" href="#" data-target="#to-dialog" data-toggle="modal">More...</a></li>'));else{var v=["add-to-dialog","add-to-client-dialog"].indexOf(c.dialogClass)>=0?"lists":"clients";u=['<li class="divider"><div style="text-align:center;">No '+v+" yet</div></li>"]}d&&(c.active.title&&u.push('<li class="divider active-item'+(d.length?"":" hide")+'">'+c.active.title+"</li>"),u=u.concat(d.map(f))),t=u.join(""),k.off("click",".btn-back"),k.find("ul").off("click","li.active-item"),k.find("ul").off("click","li:not(.active-item) a"),k.find("ul").html(t);var w=k.find(".body-content").html("");c.dialogContent&&b.when(c.dialogContent).done(w.html.bind(w)),a.length&&k.find("ul li:not(.active-item)").each(function(c){b(this).data("item",a[c])}),k.find("ul").on("click","li:not(.active-item) a",o),d&&d.length&&k.find("ul").on("click","li.active-item",l),c.back&&(k.find(".btn-back").show(),k.on("click",".btn-back",function(){b(this).hide(),c.back()}))}if(c.divider||"auto"==c.divider){if(c.divider===!0||"auto"===c.divider&&s.length){var x=c.append?"unshift":"push";s[x]('<li role="presentation" class="divider"></li>')}j.find(".divider").remove()}j.find("[data-value],.more-options").remove(),t=s.join(""),j.has(".dropdown-header")?j.find(".dropdown-header").first().after(t):c.append?j.append(t):j.prepend(t)});return b.Deferred(function(a){c.modal?k.one("hidden.bs.modal",function(c){var d={};k.find("form").each(function(){d[this.name||this.id]=b(this).serializeArray().reduce(function(a,b){return a[b.name]=b.value,a},{})}),k.find(".btn-back").hide(),a.resolve({modified:p,selections:Object.keys(q),forms:d}),q=null,k.removeClass(),k.addClass("modal fade to-dialog")}):b.when(s).done(function(){a.resolve({})})})}function B(a,d,e){var f=u(a);b.post("/lists/"+d+"/remove",{keys:f.entity.id},function(a){c&&c.remove(d,f.entity.id),e(a,f)})}function C(a,b,c){var d=u(a);E(d,b,c),a.preventDefault()}function D(a,c,d,e){a&&a.entity&&(K&&K.sameAs(a.entity.id)&&(K=null),b.post("/clients/"+c+"/suggest",{keys:a.entity.id,comment:d},function(b){F(L,a,b.title),e&&e(b,a)},"json"))}function E(a,d,e){if(a&&a.entity){var f="/lists/"+d+"/add",g={keys:b.makeArray(a.entity.id),client:a.clientId};b.post(f,g,function(b){b&&(F(L,a,b.title),c&&c.add(b.id,b.keys),e&&e(b,a))},"json")}}function F(a,c,e){var f=a.clone(),g=null,h=f.find(".msg").text();if(c.entity.id instanceof Array&&c.entity.id.length>1)g=c.entity.id.length+" items",h=h.replace(" was "," were ");else{var i=1===c.$listing.length&&c.$listing.data("id")==c.entity.id?c.$listing:c.$listing.find('[data-id="'+c.entity.id+'"]');g=i.find(".addr, .streetAddress").text().split(",")[0],g=""!==g?g:"1 item"}h=h.replace("%{key}","<strong>"+d(g)+"</strong>").replace("%{list_name}","<strong>"+d(e)+"</strong>"),f.find(".msg").html(h),J.append(f.show()),b("main").prepend(J.show()),window.setTimeout(function(){f.fadeOut(2e3,function(){f.remove()}),J.fadeOut(2e3)},3e3)}function G(){var a=b(window).height()-155;b("#to-dialog .modal-body").css({"max-height":a,"overflow-y":"auto"})}var H=b("#hover-toolbar"),I=H.parent()[0],J=b('<div class="async-info"></div>'),K=(b(".toggles"),null),L=b(".added-text"),M=b(".removed-text"),N=[],O=function(a,b){a=Array.isArray(a)?a:[a],a=a.map(function(a){return a.id||a}),b=b||{},this.keys=a,this.promise=b.promise?b.promise:z(a),this.related=b.related||null};O.prototype.sameAs=function(a){return a?(a=Array.isArray(a)?a:[a],a.length!==this.keys.length?!1:a.every(function(a,b){return this.keys.indexOf(a)>-1},this)):!1},O.prototype.relatedTo=function(a){return this.related===a},O.prototype.ok=function(){return"rejected"!==this.promise.state()},O.prototype.done=function(a){return this.promise.done(a)},O.prototype.cancelPending=function(){"pending"===this.promise.state()&&this.promise.reject("abort")},b(document.body).on("mouseenter",".btn-suggest-list",k),Responsive.isHandheldPlatform?b("body").on("click",".hcmenu-btn",function(a){/\/searches(?:$|\/)/.test(location.pathname)&&b("#hover-toolbar").find(".btn-remove-listing").remove();var c=b(this).parents("[data-entity]");return c.find("#hover-toolbar:visible").length?m(c):l(c),a.preventDefault(),!1}):b("body").on("mouseenter","[data-entity]",function(a){l(b(this))}).on("mouseleave","[data-entity]",function(a){m(b(this))}),b("body").on("click",function(a){var c=g();if(c){var d=c.element instanceof b&&c.element.length?c.element[0]:c.element,e=b.contains(d,a.target);e||c.remove(a)}}).on("listing:loaded",function(){var a=g();a&&a.remove()}),b(".modal").on("shown.bs.modal",function(){H.hide(),b(".toolbar-open").removeClass("toolbar-open")}),b(document.body).on("keyup","[data-submit-target]",function(a){if(13===a.keyCode){var c=b(a.target),d=c.attr("data-submit-target");b(d).first().click()}}),b(document.body).on("click",".btn-toggle-comment",function(c){function d(a,c,d){d=d||window;var e=d.width(),f=d.offset(),g=f.left+e;c=Math.min(c,e);var h=a.position().left,i=a.offset(),j=i.left,k=j+c/2,l=j-c/2,m=0;l<f.left?m=-l+f.left:k>g?(l=e-c/2,m=g-k):m=a.width()/2;var n=b(window).height()+b(window).scrollTop(),o=n-72-a.offset().top;return{targetWidth:a.width(),targetLeft:j,popoverLeft:l,offsetLeft:h,differential:m,maxHeight:o}}var g=u(c),h=a.user,i="comments-popover",j=g.$btn,k=0,l=function(){f(k),j.data(i).fadeOut("fast").remove(),j.tooltip("enable"),j.removeData(i)};if(j.data(i))return void l();j.tooltip("disable"),j.siblings(".comments-popover").remove();var m='<div class="popover comments-popover bottom in"><div class="arrow"></div><div class="arrow-spacer">&nbsp;</div><div class="popover-content"></div></div>',n='<div class="deferred" data-appear-top-offset="350" data-deferred-url="/comments/'+h._id+"/listing/"+g.entity.id+'?v=partial&amp;style=compact&amp;$take=all&amp;privacy=1"></div>',o=500,p=b(m);p.find(".popover-content").html(n),Responsive.isHandheld&&(o=320);var q=j.parents(".comments-popover-container"),r=d(g.$btn,o,q.length?q:b("main")),s=r.offsetLeft-o/2+r.differential;p.css({display:"block",left:s+"px",top:"46px"}),p.find(".popover-content").css({"max-height":r.maxHeight+"px"}),p.find(".arrow").css({left:o/2-r.differential+r.targetWidth/2-2+"px"}),j.after(p),j.data(i,p),e(p,k,l),b.force_appear()}),b(document.body).on("click",".btn-remove-listing",function(a){var d=u(a);if(!d.list.id)return a.preventDefault(),b(document).trigger("error",["A system list cannot be removed",""]);d.$btn.tooltip("hide"),d.$listing.addClass("fade-hidden");var e={keys:d.entity.id};return d.list&&d.list.cid&&(e.client=d.list.cid),b.post("/lists/"+d.list.id+"/remove",e,function(a){b("body").append(H.hide());var e=b("div.title span+span").html();F(M,d,e),d.$listing.remove(),c&&c.remove(d.list.id,d.entity.id)},"json"),a.preventDefault(),!1}),b("body").on("click",".btn-add-dislike, .btn-toggle-dislike",function(a){function c(a,b){b.els().toggleClass("disliked",d)}var d=b(a.target).parents(".disliked").length;return d?B(a,"dislikes",c):C(a,"dislikes",c),a.preventDefault(),!1}),b(document.body).on("click",".btn-contact-info",function(a){var c=u(a),d=c.entity.id,e="/listings/"+d+"/contacts",f=c.$listing&&c.$listing.data("contact-id");f&&(e+="?id="+f),b.get(e,function(a){b("#contact-card-modal").length>0&&b("#contact-card-modal").remove(),b(document.body).append(a);var c=b("#contact-card-modal");c.modal()})}),b(document.body).on("click",".btn-create-list",function(c){var d=b("input.list_title").val(),e=b(this).parents(".modal"),f=e.data("context");if(!d||!d.replace(/\s/gi,""))return b("input.list_title:visible").focus(),c.preventDefault(),!1;var g={title:d};f&&f.clientId&&(g.client=f.clientId),window.setTimeout(function(){b.post("/lists/new",g,function(c){b("input.list_title").val(""),b(a).trigger("list-created"),E(f,c._id,function(){})},"json")},10)}),b(document.body).on("click",".transfer-list-client-id",function(a){var c=b("#to-dialog").data("context");if(c&&c.listId){var d=c.list,e=b(this).closest("[data-value]").data("value"),f=d.cid?"/clients/"+d.cid:"";return f+="/lists/"+d.id+"/transfer/"+e,b.post(f).done(function(){var a=window.location.pathname||"/lists",b=a.replace(/(.*\/lists)(\/.*)/i,"$1");window.location=b},function(){b("#to-dialog").modal("toggle")}),a.preventDefault(),!1}}),b(document.body).on("click","#btn-transfer-list",function(a){var c=u(a),d=b("[data-collection]"),e=d.data("collection")||{},f=e.id;if(null==f)return void console.error("list not found");c.list=e,c.listId=f;var g={divider:!1,idField:"_id",displayField:o,className:"transfer-list-client-id",modal:!0,dialogClass:"transfer-list-dialog",menuLimit:v(c,120),dialogTitle:"Transfer List to"};b("#to-dialog").data("context",c),A(y(),g),a.preventDefault()}),b(document.body).on("click",".btn-add-to-list-final",function(a){var c=b("#add-to-new-list-dialog"),d=c.data("context"),e=c.find("#list_select").val();E(d,e,function(c){b(a.target).removeClass("data-loading")}),a.preventDefault()}),b(document.body).on("click",".btn-delete-list",function(a){var c=(b("#delete-list-dialog"),b("[data-collection]")),d=c.data("collection");b(a.target).addClass("data-loading"),window.setTimeout(function(){var a=d.cid?"/clients/"+d.cid+"/lists/"+d.id:"/lists/"+d.id;b.ajax({dataType:"json",type:"DELETE",url:a,error:function(a,c,d){d=a.responseText||c,c=d.split("\n")[0],b(document).trigger("error",[c,d])},success:function(a){if(a){var b=window.location.pathname||"/lists",c=b.replace(/(.*\/lists)(\/.*)/i,"$1");window.location=c}}})},10),a.preventDefault()}),b(document.body).on("click",".btn-rename-list",function(c){var d=b("#rename-list-dialog"),e=b("[data-collection]"),f=e.data("collection"),g=d.find(".rename-list-title").val();window.setTimeout(function(){var c=f.cid?"/clients/"+f.cid+"/lists/"+f.id+"/rename":"/lists/"+f.id+"/rename";b.post(c,{title:g},function(c){b("input.list_title").val(""),b(a).trigger("list-renamed",c);var d=b(".title span + span"),e=d.text();d.text(c.title),document.title=document.title.replace(e,c.title)},"json")},10),c.preventDefault()}),b(document.body).on("click","li a.list-id",function(a){if(b(a.target).closest("#to-dialog").length){b("#to-dialog").modal("hide");var c=b("#to-dialog").data("context");E(c,b(a.target).parent().data("value")),a.preventDefault()}else C(a,b(a.target).parent().data("value"))}),b(document.body).on("change paste keyup","#add-to-new-list-dialog .list_title",function(a){b("#add-to-new-list-dialog .btn-create-list").prop("disabled",a.target.value.length<=0)}),b(document.body).on("click",".btn-add-list",function(a){var b=u(a);s(b),a.preventDefault()}),b(document.body).on("click",".btn-to-client-list",function(a){var c=b("#to-dialog").data("context");return t(c),a.preventDefault(),!1}),b(document.body).on("click",".add-to-client-list",function(a){var c=b(this).parents("[data-value]").data("value"),d=b(this).parents("[data-value]").data("item"),e=b("#to-dialog").data("context");if(e&&c){var f={$list:null,divider:"auto",idField:"id",displayField:"title",className:"list-id",append:!1,modal:!0,dialogClass:"add-to-client-dialog",menuLimit:v(e,170),dialogTitle:r(e.entity.id),back:function(){t(e)}};return d&&(f.dialogTitle+=" "+d.fullname+"'s List"),e.clientId=c,b("#add-to-new-list-dialog").data("context",e),b("#to-dialog").data("context",e),A(x(p,c),f),a.preventDefault(),!1}}),b(document.body).on("click",".btn-suggest-list",function(a){var d=u(a),e=d.$btn.siblings("ul"),f=b.makeArray(d.entity.id),g=!1,h={$list:e,divider:!1,idField:"_id",displayField:o,className:"suggest-client-id",append:!0,dialogClass:"suggest-dialog",menuLimit:v(d,120),modal:q(d),dialogTitle:r(f,"Suggest "),toggle:!0,sendButtonText:"Suggest",dialogContent:b.Deferred(function(a){b.get("/comments/template?privacy=1&style=compact&header=1").done(a.resolve).fail(a.reject.bind(a,""))}).promise(),active:{title:'<h5 class="text-muted">Already Suggested <sub>click to remove</sub></h5>',deactivate:function(a){return w(f,a._id).then(function(){var b=a.fullname||"";b.length>0&&(b+="s"===b.substr(-1)?"' ":"'s "),b+="Suggestions",F(M,d,b)})},emptied:function(){g=!0}}};K&&K.ok()&&K.sameAs(f)?h.active.data=K:h.active.data=new O(f),A(y(),h).done(function(a){function b(){c.refresh(function(){if(f&&0!==f.length){var a=d.els();f.forEach(function(b){var d="string"==typeof b?b:b.id,e=a.closest('[data-id="'+d+'"]'),f=c.isMemberOf("suggested",d)?"addClass":"removeClass";e[f]("suggested")})}})}if(a.modified&&a.selections&&0!==a.selections.length){var e=a.forms&&a.forms.comment?a.forms.comment.text:null;D(d,a.selections[0],e,b)}else b()}),a.preventDefault()}),b(document.body).on("click",".btn-add-favorite, .btn-toggle-favorite",function(a){function c(a,b){b.els().toggleClass("favorited",d)}var d=b(a.target).parents(".favorited").length;return d?B(a,"favorites",c):C(a,"favorites",c),a.preventDefault(),!1}),b(document.body).on("click",".btn-add-like, .btn-toggle-like",function(a){function c(a,b){b.els().toggleClass("liked",d)}var d=b(a.target).parents(".liked").length;return d?B(a,"likes",c):C(a,"likes",c),a.preventDefault(),!1}),b(document.body).on("click",".btn-open-details",function(a){var c=b(a.target),d=c.is("button,a")?b(a.target):b(a.target).parents("button"),e=d.parents("[data-id]"),f=e.data("id");return showTable(!1),isSplitRightOpen()||toggleExpandRight(!1),loadQuickDetails(f),a.preventDefault(),!1}),a.$toggles={showToolbar:l,hideToolbar:m,hasOpenToolbar:n},b(document).ready(G),b(window).resize(G)}(window,jQuery,listManager),function(a,b){function c(a,c){function d(a){(b(a.target).is(".hover-wrapper .dropdown")||b(a.target).is(".btn-toggle-comment, .btn-toggle-comment *"))&&b(a.target).closest(".hover-wrapper").find(".open").not(a.target).removeClass("open")}b(".grid-tooltip").find("li").clone();b(a).on("show.bs.dropdown shown.bs.dropdown",d),b(a).on("click",d),b(a).on("hide.bs.dropdown",function(a){return!1})}a.TogglesContextMenu=c}(window,jQuery),function(a,b){function c(a){var c=b(a).closest("[data-co-conversation]"),d=b(a).closest("[data-co-comment]"),e=c.find("[data-co-comments]"),f=c.data("co-conversation"),g=d.data("co-comment"),h={conversation:f,comment:g,$conversation:c,$comment:d,$comments:e,$element:b(a)};return h}function d(a){a&&a.preventDefault&&a.preventDefault();var c=b(this);c.closest("div").find(".hidden-comments").fadeIn(),c.parent().remove()}function e(a){a&&a.preventDefault&&a.preventDefault();var c=b(this).closest("[data-co-comment-start]"),d=c.data("co-comment-start"),e="/comments/"+d.uid+"/"+d.type+"/"+d.id+"?style=compact";return b.get(e,function(a){var d=b(a),e=c.data("co-comment-start-selector"),f=c.closest(e);c.hide(),f.find("[data-co-conversation]").length&&f.find("[data-co-conversation]").remove(),f.append(d),d.find("[data-co-comment-text]").focus()}),!1}function f(a){a&&a.preventDefault&&a.preventDefault();var d=c(this);d.$comment.find("[data-co-comment-edit-actions]").replaceWith(b('<a data-co-comment-edit href="#">Edit</a>'));var e=d.$comment.find("[data-co-comment-editor]"),f=e.find("textarea").data("original"),g=b('<span class="text"></span>');return g.text(f),e.replaceWith(g),!1}function g(a){}function h(a){a&&a.preventDefault&&a.preventDefault();var d=c(this),e=this,g=d.$comment.find("[data-co-comment-editor]"),h=g.find("textarea").val();return b.ajax("/comments/"+d.comment+"/text",{data:{value:h},type:"put",success:function(a,b,c){g.find("textarea").data("original",a),f.call(e)}}),!1}function i(a){a&&a.preventDefault&&a.preventDefault();var d=c(this),e=b('<div data-co-comment-editor><textarea data-co-edited_text style="margin-bottom:2px;" class="input" rows="1" onkeyup="resizeTextArea(this);"></textarea></div>'),f=d.$comment.find(".text").text();return d.$element.replaceWith(b('<span data-co-comment-edit-actions><a data-co-comment-cancel-edit href="#">Cancel</a> &middot; <a data-co-comment-save href="#">Save</a></span>')),e.find("textarea").val(f).data("original",f),d.$comment.find(".text").replaceWith(e),e.find("textarea").focus().val("").val(f).keyup(),!1}function j(){function a(){b(this).remove()}var d=c(this);return bootbox.dialog({message:"Are you sure you want to delete this comment?",title:"Confirm Comment Delete",buttons:{cancel:{label:"Cancel",className:"btn-default",callback:function(){}},danger:{label:"Delete",className:"btn-danger",callback:function(){b.ajax("/comments/"+d.comment,{type:"delete",success:function(c){var e=(c.root,c.comments);if(e&&e.length)for(var f=0;f<e.length;f++){var g=e[f];d.$comments.find("[data-co-comment='"+g+"']").fadeOut(1e3,a)}if(c.events)for(var h=0;h<c.events.length;h++)b(document).trigger(c.events[h].type,c.events[h].data)}})}}}}),!1}function k(a,c){var d=c.conversation,e=c.$comment,f=e.find("[data-co-comment]").data("co-comment"),g=JSON.stringify(d),h=b("[data-co-conversation]");h.each(function(a,c){var d=b(c);if(d.attr("data-co-conversation")==g){if(d.find("[data-co-comment="+f+"]").length)return;var h=e.clone();d.find("[data-co-comments]").append(h),h.fadeIn(1e3)}})}function l(){var a=b(this),d=a.serialize(),e=a.attr("action"),f=a.attr("method"),g=c(this),h=a.find("[data-co-comment-text]");return h.data("val",h.val()),h.val("").keyup(),b.ajax(e,{data:d,type:f,dataType:"html",success:function(a,c,d){var e=b(a).hide();b(document).trigger("comment:add",{conversation:g.conversation,$comment:e.clone()}),e.fadeIn(1e3,function(){var a=g.conversation;a&&"listing"==a.type&&b(document).trigger("list.add",{list_id:"comments",key:a.id})})}}),!1}a._commentsLoaded||(a._commentsLoaded=1,b(document).on("click","[data-co-comment-edit]",i),b(document).on("click","[data-co-comment-delete]",j),b(document).on("submit","[data-co-new-comment]",l),b(document).on("click","[data-co-comment-cancel-edit]",f),b(document).on("click","[data-co-comment-save]",h),b(document).on("click","[data-co-comment-start]",e),b(document).on("click","[data-co-comments-more]",d),b(document).on("click","[data-co-comment-dropdown]",g),b(document).on("comment:add",k))}(this,jQuery),function(a,b){function c(a){if(37!=a.keyCode&&39!=a.keyCode&&9!=a.keyCode){var c=b(a.currentTarget),d=accounting.unformat(c.val());switch(c.prop("id")){case"mtg_salePrice":b("#mtg_downPayment").val(accounting.formatMoney(d*accounting.unformat(document.getElementById("mtg_percentDownPayment").value)*.01,"$",0)),c.val(accounting.formatMoney(d,"$",0));break;case"mtg_percentDownPayment":b("#mtg_downPayment").val(accounting.formatMoney(d*accounting.unformat(document.getElementById("mtg_salePrice").value)*.01,"$",0));break;case"mtg_downPayment":b("#mtg_percentDownPayment").val(Math.round(d/accounting.unformat(document.getElementById("mtg_salePrice").value)*100)),c.val(accounting.formatMoney(d,"$",0))}c.closest("form").find("[type=reset]").removeAttr("disabled"),e()}}function d(a){b(a.currentTarget).attr("disabled",!0),b(".mortgage-container form").get(0).reset(),e()}function e(){if(document.getElementById("mtg_salePrice")){var a=b(".mortgage-container").data("initialized");a||(b(".mortgage-container form").submit(function(a){return b(this).find(":input").blur(),e(),a.preventDefault(),a.stopPropagation(),!1}),b(".mortgage-container").data("initialized",!0));var c=b(".mortgage-container").data("mortgage-additional")||[],d=accounting.unformat(document.getElementById("mtg_salePrice").value),h=.01*accounting.unformat(document.getElementById("mtg_percentDownPayment").value),i=.01*document.getElementById("mtg_mortgageRate").value,j=document.getElementById("mtg_term").value||0,k=(document.getElementById("mtg_compounding")||{}).value||"default",l=parseFloat(document.getElementById("mtg_taxes").value||0),m="true"===(document.getElementById("include_insurance")||{}).value,n="true"===(document.getElementById("include_pmi")||{}).value,o=Math.max(d*(1-h),0),p=i/12,q=12*j;if("ca"==k){var r=Math.pow(1+i/2,1/6)-1;p=r}var s=o*p/(1-Math.pow(1+p,-q)),t=l||0,u=d/1e3*3.5,v=m?u/12:0,w=0;if(n&&o/d>.8){var x=f(j,o/d,k);if("ca"==k){var y=x*o;w=y*p/(1-Math.pow(1+p,-q))}else w=d*x/12}var z=c.reduce(function(a,b){return a+b.amount},0),A=s+t+(v||0)+w+z;isNaN(A)&&(A=0),document.getElementById("mtg_paymentFormatted").innerHTML=A===1/0?"":accounting.formatMoney(A,"$",0),b("#mortgage_graph svg").remove(),g(s,t,v,w,c,m,n)}}function f(a,b,c){if("ca"==c).8>=b?rate=0:.85>=b?rate=1.75:.9>=b?rate=2:.95>=b?rate=2.75:rate=2.9;else if(.8>=b);else{var d=a>20;.85>b?rate=d?.24:.22:.9>b?rate=d?.41:.31:.95>b?rate=d?.59:.54:rate=d?.91:.83}return rate/100}function g(a,c,d,e,f,g,h){var i=[(a==1/0?"":accounting.formatMoney(a,"$",0))+" Principal and Interest"],j=[a];if(c&&(i.push(accounting.formatMoney(c,"$",0)+" Property Taxes"),j.push(c)),g&&d&&(i.push(accounting.formatMoney(d,"$",0)+" Homeowners Insurance"),j.push(d)),h&&e&&(i.push(accounting.formatMoney(e,"$",0)+" Mortgage Insurance"),j.push(e)),f&&f.length)for(var k=0;k<f.length;k++)j.push(f[k].amount),i.push(f[k].amountFormatted+" "+f[k].text);var l=Responsive.isHandheld,m=90,n=.7,o=l?b("#mortgage_graph").parent().width()-18:384,p=l?320:350,q=l?100:118,r=b("#mortgage_graph_donut");r.css({top:q-30,left:(o-r.width())/2});var s=new Raphael("mortgage_graph",o,p),t=s.piechart(o/2,q,m,j,{colors:["#428bca","#d9534f","#5cb85c","#f0ad4e","#5bc0de"],legend:i,legendpos:"south",matchColors:!1,startFromFixedAngle:90,minPercent:.1}),u=!0;if(u){var v=s.circle(o/2,q,m*n);v.attr("fill","#fff"),v.attr("stroke","#fff")}t.hover(function(){this.sector.stop(),this.sector.scale(1.05,1.05,this.cx,this.cy),this.label&&(this.label[0].stop(),this.label[0].attr({r:7.5}),this.label[1].attr({"font-weight":"500"}))},function(){this.sector.stop(),this.sector.animate({transform:"s1 1 "+this.cx+" "+this.cy},100,"bounce"),this.label&&(this.label[0].animate({r:5},500,"bounce"),this.label[1].attr({"font-weight":"400"}))})}b(document).on("keyup",".mortgage-container input",b.debounce(c,250)),b(document).on("click",".reset-mortgage-calc",d),b(a).on("listing:loaded",e),b(a).ready(e)}(this,jQuery),function(a,b){function c(){document.getElementById("popularity-graph-data")&&d(b("#popularity-graph-view").data("name"))}function d(a){var c=[],d=[];b("#popularity-graph-data tfoot th").each(function(){c.push(new moment(parseInt(b(this).text(),10)))}),b("#popularity-graph-data tbody td").each(function(){
d.push(b(this).text())});var e=.9*b("#popularity-graph-view").parent().width(),f=240;max=Math.max.apply(Math,d);var g=60,h=30,i=40,j=20,k=.6,l="hsl("+[k,.5,.5]+")",m=Raphael("popularity-graph-view",e,f),n={font:"12px Helvetica, Arial",fill:"#fff"},o={font:"10px Helvetica, Arial",fill:"#fff"},p={font:"10px Helvetica, Arial",fill:"#444"},q={font:"13px Helvetica, Arial",fill:"#999",transform:"r270"},r=(e-(g+h))/c.length,s=f-(i+j),t=max/4;if(max>0&&(s/=max),m.drawGrid(g+.5*r+.5,j+.5,e-(g+h)-r,f-(i+j),0,0,"#000"),t>=4)for(var u=0;4>=u;u++)m.text(g/2+15,f-i-u*s,Math.round(t*u)).attr(p);else for(var u=0;u<=max;u++)m.text(g/2+15,f-i-u*s,u).attr(p);m.text(g/2-10,f/2-j,a).attr(q),m.text(g+.5*r+6*r,f-i/2,c[6].format("MMM D")+"\n"+c[6].format("YYYY")).attr(p),m.text(g+.5*r+12*r,f-i/2,c[12].format("MMM D")+"\n"+c[12].format("YYYY")).attr(p),m.text(g+.5*r+18*r,f-i/2,c[18].format("MMM D")+"\n"+c[18].format("YYYY")).attr(p),m.text(g+.5*r+24*r,f-i/2,c[24].format("MMM D")+"\n"+c[24].format("YYYY")).attr(p);var v,w=m.path().attr({stroke:l,opacity:.75,"stroke-width":2,"stroke-linejoin":"round"}),x=m.set(),y=0,z=0,A=!1,B=m.set();x.push(m.text(60,12,"0 views").attr(n)),x.push(m.text(60,27,"20 May 2016").attr(o)),x.hide();for(var C,D=m.popup(100,100,x,"right").attr({fill:"#000",stroke:"#666","stroke-width":2,"fill-opacity":.6}).hide(),u=0,E=c.length;E>u;u++){var F=Math.round(f-i-s*d[u]),G=Math.round(g+r*(u+.5));if(u||(C=["M",G,F,"L",G,F]),u&&E-1>u&&(C=C.concat(["L",G,F])),d[u]>0){var H=m.circle(G,F,4).attr({fill:"#fff",stroke:l,"stroke-width":2});B.push(m.rect(g+r*u,0,r,f-i).attr({stroke:"none",fill:"#fff",opacity:0}));var I=B[B.length-1];!function(a,b,c,d,f){I.hover(function(){clearTimeout(v);var g="right";a+D.getBBox().width>e&&(g="left");var h=m.popup(a,b,x,g,1),i=Raphael.animation({path:h.path,transform:["t",h.dx,h.dy]},200*A);y=x[0].transform()[0][1]+h.dx,z=x[0].transform()[0][2]+h.dy,D.show().stop().animate(i),x[0].attr({text:c+" view"+(1==c?"":"s")}).show().stop().animateWith(D,i,{transform:["t",y,z]},200*A),x[1].attr({text:d.format("MMM Do")}).show().stop().animateWith(D,i,{transform:["t",y,z]},200*A),f.attr("r",6),A=!0},function(){f.attr("r",4),v=setTimeout(function(){D.hide(),x[0].hide(),x[1].hide(),A=!1},1)})}(G,F,d[u],c[u],H)}}C=C.concat([G,F,G,F]),w.attr({path:C}),D.toFront(),x[0].toFront(),x[1].toFront(),B.toFront()}b(a).on("listing:loaded",c),b(a).ready(function(){Raphael.fn.drawGrid=function(a,b,c,d,e,f,g){if(g=g||"#000",0==e&&0==f){var h=["M",Math.round(a)+.5,Math.round(b+d)+.5,"L",Math.round(a+c)+.5,Math.round(b+d)+.5];return this.path(h).attr({stroke:g})}for(var h=["M",Math.round(a)+.5,Math.round(b)+.5,"L",Math.round(a+c)+.5,Math.round(b)+.5,Math.round(a+c)+.5,Math.round(b+d)+.5,Math.round(a)+.5,Math.round(b+d)+.5,Math.round(a)+.5,Math.round(b)+.5],i=d/f,j=c/e,k=1;f>k;k++)h=h.concat(["M",Math.round(a)+.5,Math.round(b+k*i)+.5,"H",Math.round(a+c)+.5]);for(k=1;e>k;k++)h=h.concat(["M",Math.round(a+k*j)+.5,Math.round(b)+.5,"V",Math.round(b+d)+.5]);return this.path(h.join(",")).attr({stroke:g})},Raphael.fn.popup=function(a,b,c,d,e){var f=/\{([^\}]+)\}/g,g=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|')(.+?)\2\])(\(\))?/g,h=function(a,b,c){var d=c;return b.replace(g,function(a,b,c,e,f){b=b||e,d&&(b in d&&(d=d[b]),"function"==typeof d&&f&&(d=d()))}),d=(null==d||d==c?a:d)+""};fill=function(a,b){return String(a).replace(f,function(a,c){return h(a,c,b)})},d=String(d||"top-middle").split("-"),d[1]=d[1]||"middle";var i=5,j=c.getBBox(),k=Math.round(j.width),l=Math.round(j.height),m=Math.round(j.x)-i,n=Math.round(j.y)-i,o=Math.min(l/2,k/2,10),p={top:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}l-{right},0-{gap},{gap}-{gap}-{gap}-{left},0a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",bottom:"M{x},{y}l{left},0,{gap}-{gap},{gap},{gap},{right},0a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z",right:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}v{h4},{h4},{h4},{h4}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}l0-{bottom}-{gap}-{gap},{gap}-{gap},0-{top}a{r},{r},0,0,1,{r}-{r}z",left:"M{x},{y}h{w4},{w4},{w4},{w4}a{r},{r},0,0,1,{r},{r}l0,{top},{gap},{gap}-{gap},{gap},0,{bottom}a{r},{r},0,0,1,-{r},{r}h-{w4}-{w4}-{w4}-{w4}a{r},{r},0,0,1-{r}-{r}v-{h4}-{h4}-{h4}-{h4}a{r},{r},0,0,1,{r}-{r}z"},q=[{x:m+i,y:n,w:k,w4:k/4,h4:l/4,right:0,left:k-2*o,bottom:0,top:l-2*o,r:i,h:l,gap:o},{x:m+i,y:n,w:k,w4:k/4,h4:l/4,left:k/2-o,right:k/2-o,top:l/2-o,bottom:l/2-o,r:i,h:l,gap:o},{x:m+i,y:n,w:k,w4:k/4,h4:l/4,left:0,right:k-2*o,top:0,bottom:l-2*o,r:i,h:l,gap:o}]["middle"==d[1]?1:2*("top"==d[1]||"left"==d[1])],r=0,s=0,t=this.path(fill(p[d[0]],q)).insertBefore(c);switch(d[0]){case"top":r=a-(m+i+q.left+o),s=b-(n+i+l+i+o);break;case"bottom":r=a-(m+i+q.left+o),s=b-(n-o);break;case"left":r=a-(m+i+k+i+o),s=b-(n+i+q.top+o);break;case"right":r=a-(m-o),s=b-(n+i+q.top+o)}return t.translate(r,s),e?(e=t.attr("path"),t.remove(),{path:e,dx:r,dy:s}):(c.translate(r,s),t)},c()}),a.initializePopularityGraph=c}(this,jQuery),function(a,b,c,d){function e(){function a(a){switch(a){case"transit":d?d.maps.event.trigger(map,"resize"):map&&map.invalidateSize&&map.invalidateSize(!0);break;case"streetview":if(!d)return;var b=new d.maps.LatLng(h.lat,h.lng),e={position:b,pov:{heading:34,pitch:10},scrollwheel:!1},f=document.getElementById("streetview-map"),g=new d.maps.StreetViewPanorama(f,e),i=new d.maps.StreetViewService;i.getPanoramaByLocation(b,50,function(a,c){if(c==d.maps.StreetViewStatus.OK){var e=a.location.latLng,f=d.maps.geometry.spherical.computeHeading(e,b),h=g.getPov();h.heading=f,g.setPov(h)}}),nearby_map&&nearby_map.setStreetView(g);break;case"birdseye":c()}}function c(){var a=b("#nearby-container").data("map-settings"),c=b(i).data("co-nearby-location");if("streetOnly"!=a.addressType&&"crossStreet"!=a.addressType){var d="bing"==a.tileProvider?a.key:null;if(!g||!b("#birdseye-map .MicrosoftMap").length){if("undefined"==typeof Microsoft||"undefined"==typeof Microsoft.Maps){var f="https:"==window.location.protocol,j="//ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx";return b.getScript(j+"?v=7.0"+(f?"&s=1":"")+"&onscriptload="+e),void logManager.log("bing","map")}var k={lat:"number"==typeof h.lat?h.lat:h.lat(),lng:"number"==typeof h.lng?h.lng:h.lng()},l=new Microsoft.Maps.Location(k.lat,k.lng),m={credentials:d,mapTypeId:Microsoft.Maps.MapTypeId.birdseye,center:l,zoom:20,enableSearchLogo:!1,enableClickableLogo:!1};Responsive.isHandheld&&b("#birdseye-map").css("visibility","hidden"),g=new Microsoft.Maps.Map(document.getElementById("birdseye-map"),m),Microsoft.Maps.Events.addHandler(g,"mousewheel",function(a){return a.handled=!0,!0});var n=new Microsoft.Maps.Pushpin(l,{height:21,width:45,anchor:new Microsoft.Maps.Point(21,23),icon:"/images/listing-marker.png?000000001",htmlContent:'<div class="icon"><img src="/images/listing-marker.png?000000001" style="margin-top:-4px;width:45px;height:21px;"><div class="leaflet-marker-label">'+c.name+"</div></div>"});g.entities.push(n),Responsive.isHandheld&&b("#birdseye-map").css("visibility","visible")}}}b("#mapView a").tab().click(function(c){return c.preventDefault(),b(this).tab("show"),b("#maps-container .tab-pane active").tab("hide"),a(b(this).attr("href").split("#")[1]),!1});var e="_fn"+Math.ceil(1e5*Math.random());window[e]=function(){"undefined"!=typeof Microsoft&&"Maps"in Microsoft&&Microsoft.Maps.Location&&c()}}function f(a){var c=b(a.target),d=c.find(i+":visible"),f=b("#nearby-container").data("map-settings"),g=b('#nearby-container a[href="#birdseye"]');if(f&&g.length&&(g=g.parent(),"streetOnly"==f.addressType||"crossStreet"==f.addressType?g.remove():g.show()),!d.data("nearby-loaded")){d.data("nearby-loaded",!0);var j=d.data("co-nearby-location");h={lat:j.center.y,lng:j.center.x},e(),b(d).trigger("nearby:draw",j)}}var g,h,i="[data-co-nearby-location]";b(document.body).on("nearby:loaded",f)}(this,jQuery,"undefined"==typeof L?null:L,"undefined"==typeof google?null:google);